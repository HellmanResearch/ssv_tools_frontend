(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},o=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0aa606":"4761b033","chunk-2d0b6b2a":"adc568ff","chunk-2d0bb1ee":"d3b31846","chunk-2d0bb229":"a252b8e6","chunk-2d0c0a81":"fad5d2f1","chunk-2d0c1987":"ccd2932b","chunk-2d0c431e":"285fb24e","chunk-2d0c46a7":"360de0f6","chunk-2d0c736c":"91cf0b9c","chunk-2d0c7b6b":"2fa191b9","chunk-2d0c8277":"2fccb332","chunk-2d0c8426":"b6b7579d","chunk-2d0c8999":"fc138c31","chunk-2d0c917c":"a1c05bd8","chunk-2d0cb6d2":"fb2d251c","chunk-2d0cbb70":"4186c4ef","chunk-2d0ccb79":"b7db87ba","chunk-2d0cf2b9":"6986f695","chunk-2d0cf8a4":"741aacab","chunk-2d0d72d1":"3edc352b","chunk-2d0d7313":"500dcf64","chunk-2d0d83d9":"b30657ba","chunk-2d0dae2b":"c4f58fa7","chunk-2d0de311":"e9c86256","chunk-2d0deeb3":"1ae41ec3","chunk-2d0e1ba3":"b87a9503","chunk-2d0e1c4a":"21d8f39a","chunk-2d0e2534":"6948778f","chunk-2d0e625c":"2d50c791","chunk-2d0e93a2":"be151fbf","chunk-2d0e9985":"df6c131e","chunk-2d0efc5f":"2fc54845","chunk-2d0f0f9f":"76f9221b","chunk-2d20771b":"efac60a4","chunk-2d208107":"38e5be39","chunk-2d20f915":"fb485d72","chunk-2d20fac9":"09941d3f","chunk-2d20fb25":"905af0fd","chunk-2d2136db":"14a1c79a","chunk-2d215cf0":"fa67d2fa","chunk-2d216f3a":"4e301626","chunk-2d217346":"8e0bf8b9","chunk-2d217349":"cc190060","chunk-2d217e4c":"f98ada70","chunk-2d21d667":"fac2e7d4","chunk-2d21d8b1":"6fb027ed","chunk-2d221e55":"e37fae6d","chunk-2d222774":"d182582a","chunk-2d2244d6":"30ac35aa","chunk-2d225494":"35247e8b","chunk-2d2256a4":"06e40e6c","chunk-2d2259e9":"b28ab144","chunk-2d225b5b":"a4908376","chunk-2d22c0c9":"737cb96f","chunk-2d22db4b":"bab426d1","chunk-2d22dd74":"08cce5c0","chunk-2d230c13":"e6f61d71","chunk-2d2389f9":"b4f9401f","chunk-2e8dd819":"98f6028e","chunk-39d0b076":"f864f114","chunk-4396bccc":"0e1d7b13","chunk-746fc25a":"cd1d62f3","chunk-773f2a94":"67c1ef54","chunk-9ab39112":"10f1d758"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=n);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=r(e);var c=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(d);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",c.name="ChunkLoadError",c.type=n,c.request=o,a[1](c)}i[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("4e48")},"06fb":function(e,t,a){"use strict";a("6bc4")},"08e8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"0c20":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"800px",title:e.data["_index"]+" "+e.data["_id"]+" 详细信息",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",[a("span",{staticClass:"label"},[e._v("创建者:")]),e._v(e._s(e.data["_source"]["S-creator"])+" ")]),a("div",[a("span",{staticClass:"label"},[e._v("创建时间:")]),e._v(e._s(e.data["_source"]["S-creation-time"])+" ")]),a("div",[a("span",{staticClass:"label"},[e._v("最后修改人:")]),e._v(e._s(e.data["_source"]["S-last-modified"])+" ")]),e._l(e.data["_source"],(function(t,n,i){return"S"!=n[0]?a("div",{key:i},[a("span",{staticClass:"label"},[e._v(e._s(n)+":")]),e._v(e._s(t)+" ")]):e._e()}))],2)},i=[],o={data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,ddd:[{name:"zhangsan"}]}},props:["data","source"],mounted:function(){console.log("mounted"),console.log("data:",this.data),console.log("table_data:",this.table_data)},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()}}},r=o,s=(a("9ce1"),a("8b2e")),l=Object(s["a"])(r,n,i,!1,null,"5709ab64",null);t["default"]=l.exports},"0c53":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"Edit pre-task",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:function(t){return e.on_close(!0)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"script: ",error:e.form_errors.prep_script}},[a("g-monaco-editor",{staticStyle:{height:"300px"},attrs:{language:e.language},model:{value:e.form_data.prep_script,callback:function(t){e.$set(e.form_data,"prep_script",t)},expression:"form_data.prep_script"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.submit_loading,type:"primary"},on:{click:function(t){return e.on_submit()}}},[e._v("Submit ")])],1)],1)],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.create_update_dialog_mixin],data:function(){return console.log(this),{language:"other"}},methods:{}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"0dbb":function(e,t,a){"use strict";a("ffae");t["a"]=[{path:"app",name:"app",component:function(){return Promise.resolve().then(a.bind(null,"7104"))},meta:{name:"App",icon:"fa-th",login:!0}},{path:"instance",name:"instance",component:function(){return Promise.resolve().then(a.bind(null,"e753"))},meta:{name:"Instance",icon:"fa-list",login:!0}},{path:"release",name:"release",component:function(){return Promise.resolve().then(a.bind(null,"4115"))},meta:{name:"Release",icon:"fa-rocket",login:!0}}]},"163c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},1992:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"kill_number",prop:"kill_number","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/apps"}},mounted:function(){this.get_data()},methods:{}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"19cf":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a("8310"),a("56f2");var n=a("5601"),i={data:function(){return{loading:!1,data:{rows:[]},params:{}}},methods:{get_data:function(){var e=this;this.loading=!0,this.g_master_api.get(this.url,{params:this.params}).then((function(t){e.loading=!1,e.data.rows=t.data.results,e.after_get_data(t)})).catch((function(t){e.loading=!1,e.after_get_data_error(t)}))},after_get_data:function(e){},after_get_data_error:function(e){console.error(e)},add_dialog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a["parent"]=this;var i=n["default"].component(e),o=new i({propsData:a});return o.$parent=this,o.$store=this.$store,o.$mount(),o.$on("add_item",(function(e){t.data.unshift(e)})),o.$on("update_item",(function(e,a){t.data.splice(t.data.indexOf(e),1,a)})),o.$on("delete_item",(function(e){t.data.splice(t.data.indexOf(e),1)})),this.$el.appendChild(o.$el),o}},computed:{is_data_empty:function(){return!this.loading&&0==this.data.rows.length}}},o=(a("1991"),a("9c85"),a("a646"),a("a509"),function(e){for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join("、"));return e}),r={props:{parent:{type:Object,required:!1},item:{type:Object,required:!1},item_id:{required:!1},type:{type:String,default:"create",validator:function(e){return-1!==["create","update"].indexOf(e)}}},data:function(){return{is_visible:!0,url:this.parent?"create"===this.type?this.parent.url:"".concat(this.parent.url,"/").concat(this.item?this.item.id:this.item_id):"",loading:!1,data:this.item?this.item:{},form_data:"update"===this.type?Object.assign({},this.item):{},form_errors:{},submit_loading:!1,success_msg:"create"===this.type?"创建成功":"更新成功",close_confirm:!0}},mounted:function(){if("update"===this.type&&!this.item){if(!this.item_id)throw Error("当type为update时 prop属性item和item_id不能同时为空");this.get_data()}},methods:{on_submit:function(){var e=this,t=this.before_submit();null!=t&&(this.submit_loading=!0,this.g_master_api.request({url:this.url,method:"create"===this.type?"post":"put",data:t}).then((function(t){e.submit_loading=!1,e.success_msg&&e.$message.success(e.success_msg),"create"===e.type?e.$emit("add_item",t.data):e.$emit("update_item",e.item,t.data),e.after_submit(t),e.on_close()})).catch((function(t){e.submit_loading=!1,t.response&&t.response.data&&(e.form_errors=o(t.response.data)),e.after_submit_error(t)})))},before_submit:function(){return this.form_data},after_submit:function(e){},after_submit_error:function(e){},on_close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.is_visible=!0,this.$confirm("确认关闭","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()})).catch((function(){}))):(this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy())},get_data:function(){var e=this;this.loading=!0,this.$c_master.get(this.url).then((function(t){e.loading=!1,e.form_data=t.data})).catch((function(t){e.loading=!1}))},on_before_close:function(e){var t=this;this.close_confirm?this.$confirm("确认关闭？").then((function(a){e(),t._remote_child()})).catch((function(e){})):(e(),this._remote_child())}}},s=a("3419"),l=a("7a81"),c={props:{parent:{type:Object,required:!0},item:{type:Object,required:!1},item_id:{required:!1},append_to_body:{type:Boolean,default:!1}},data:function(){return{is_visible:!0,url:"".concat(this.parent.url,"/").concat(this.item?this.item.id:this.item_id),loading:!1,data:this.item?this.item:{id:this.item_id}}},mounted:function(){if(!this.item&&!this.item_id)throw Error("prop属性item和item_id不能同时为空");this.get_data()},methods:{on_close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.is_visible=!0,this.$confirm("确认关闭","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()})).catch((function(){}))):(this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.$destroy())},get_data:function(){var e=this;this.loading=!0,this.g_master.get(this.url).then((function(t){e.loading=!1,e.data=t.data})).catch((function(t){e.loading=!1}))}}},d={props:{item:{type:Object},update_item:{type:Boolean},delete_item:{type:Boolean}},data:function(){return{is_visible:!0,loading:!1,data:{},form_data:{},form_errors:{},submit_loading:!1,success_msg:"操作成功"}},mounted:function(){},methods:{on_submit:function(){var e=this,t=this.before_submit();null!=t&&(this.submit_loading=!0,this.g_master_api.post(this.url,this.form_data).then((function(t){e.submit_loading=!1,e.$message.success(e.success_msg),e.item&&e.update_item&&e.$emit("update_item",e.item,t.data),e.item&&e.delete_item&&e.$emit("delete_item",e.item),e.after_submit(t),e.on_close()})).catch((function(t){e.submit_loading=!1,console.error("error:",t),t.response&&t.response.data&&(e.form_errors=t.response.data),e.after_submit_error(t)})))},before_submit:function(){return this.form_data},after_submit:function(e){},after_submit_error:function(e){},get_data:function(){var e=this;this.loading=!0,this.$c_master.get(this.url).then((function(t){e.loading=!1,e.data=t.data})).catch((function(t){e.loading=!1}))},on_close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.is_visible=!0,this.$confirm("确认关闭","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._remote_child(),e.$destroy()})).catch((function(){}))):(this._remote_child(),this.$destroy())},_remote_child:function(){this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},u=r;s["a"],l["a"],t["b"]={chart_mixin:i,create_update_dialog_mixin:r,dialog_mixin:s["a"],list_mixin:l["a"],detail_dialog_mixin:c,action_dialog_mixin:d}},"1b21":function(e,t,a){},3126:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:e.template?"修改模板-"+e.template.name:"添加模板",width:"1200px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},"before-close":e.on_before_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-tab-pane",{attrs:{label:"基本",name:"0"}},[a("el-form",{staticStyle:{height:"330px","margin-right":"50px","padding-top":"30px"},attrs:{"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"节点名:",error:e.form_errors.name,required:""}},[a("el-input",{model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:"form_data.name"}})],1)],1),a("el-col",{attrs:{span:12}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"表 单",name:"1"}},[a("el-form",{staticStyle:{height:"360px","margin-right":"50px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"表单schema",error:e.form_errors.application_schema}},[a("base-monaco-editor",{staticStyle:{height:"350px"},attrs:{language:"json"},model:{value:e.form_data.application_schema,callback:function(t){e.$set(e.form_data,"application_schema",t)},expression:"form_data.application_schema"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"验证",name:"2"}},[a("el-form",{staticStyle:{height:"360px","margin-right":"50px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"申请验证脚本",error:e.form_errors.verification_script}},[a("base-monaco-editor",{staticStyle:{height:"350px"},attrs:{language:"python"},model:{value:e.form_data.verification_script,callback:function(t){e.$set(e.form_data,"verification_script",t)},expression:"form_data.verification_script"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"处理脚本",name:"6"}},[a("el-form",{staticStyle:{height:"360px","margin-right":"50px"},attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"脚本",error:e.form_errors.script}},[a("base-monaco-editor",{staticStyle:{height:"330px"},attrs:{language:"python"},model:{value:e.form_data.script,callback:function(t){e.$set(e.form_data,"script",t)},expression:"form_data.script"}})],1)],1)],1)],1),a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left",disabled:Number(e.active)<=0},on:{click:e.on_previous_step}},[e._v("上一步")]),a("el-button",{attrs:{type:"primary",disabled:Number(e.active)>=6},on:{click:e.on_next_step}},[e._v("下一步 "),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:e.template?"el-icon-refresh":"el-icon-plus",loading:e.submit_loading,"element-loading-spinner":"el-icon-loading"},on:{click:e.on_submit}},[e._v(e._s(e.template?"更新":"创建"))])],1)])},i=[],o=(a("2410"),a("4360")),r='支持的字段类型：Group Boolean Char IPAddress Integer Float DateTime Date Time Choice MultipleChoice \n公共属性：many required default default_number unit skip help_text \n数字属性：max_value min_value \n字符串属性: max_length min_length \n选择属性: choices\n示例:\n{\n"apps":{\n\t"many":true,\n\t"type":"Char",\n\t"unit":null,\n\t"required":true,\n\t"help_text":"应用名"\n},\n"rear_end":{\n        "many":false,\n        "type":"Group",\n        "unit":null,\n        "label":"rear_end",\n        "childs":{\n            "port":{\n                "many":false,\n                "type":"Integer",\n                "unit":null,\n                "label":"port",\n                "default":"3389",\n                "required":true,\n                "help_text":null,\n                "max_value":65535\n            },\n            "protocol":{\n                "many":false,\n                "type":"Choice",\n                "unit":null,\n                "label":"protocol",\n                "choices":[\n                    [\n                        0,\n                        "http"\n                    ],\n                    [\n                        1,\n                        "https"\n                    ],\n                    [\n                        2,\n                        "tcp"\n                    ],\n                    [\n                        3,\n                        "udp"\n                    ]\n                ],\n                "default":1,\n                "required":true,\n                "help_text":null\n            }\n        },\n        "default":null,\n        "required":false,\n        "help_text":null\n    }\n}',s='系统会将当前用户信息以json字符串传入脚本\n返回数据格式必须为[["value1", "label1"],["value2", "label2"]]类型json字符串\n脚本最长执行时间为15秒\n示例:\n#!/usr/bin/env python\n# coding: utf-8\nimport sys\nimport json\nimport requests\n\nuser_info = json.loads(sys.argv[1])\nresponse = requests.get("http://cmdb.hellobike.cn/resources")\nresources = response.json()\noptional_values = [[item["name"], item["label"]] for item in resources]\nprint(json.dumps(optional_values))',l='系统会将当前用户信息和用户申请参数以两个json字符串传入脚本\n脚本返回退出状态码为0则验证通过\n脚本最长执行时间为15秒 超时将会被杀死并返回验证失败\n示例:\n#!/usr/bin/env python\n# coding: utf-8\nimport sys\nimport json\nimport requests\n\nuser_info = json.loads(sys.argv[1])\nuser_input_args = json.loads(sys.argv[1])\nresponse = requests.get("http://cmdb.hellobike.cn/resources")\nresources = response.json()\nname_list = [item["name"] for item in resources]\nif user_input_args["name"] in name_list:\n    print("资源已存在")\n    exit(1)',c='系统会将当前用户信息、用户申请参数、一级审批参数、二级审批参数。。。处理人填写的参数依次以json字符串传入脚本\n脚本返回退出状态码为0则处理成功\n脚本最长执行时间为10分钟 超时将会被杀死并标记为处理失败\n示例:\n#!/usr/bin/env python3\nimport sys\nimport json\nimport requests\n\nuser_info = json.loads(sys.argv[1])\nuser_input_args = json.loads(sys.argv[2])\napproval_args1 = json.loads(sys.argv[3])\napproval_args2 = json.loads(sys.argv[4])\napproval_args3 = json.loads(sys.argv[5])\n\ndata = {\n    "username": user_info["username"],\n    "ecs_type": user_input_args["ecs_type"],\n    "available_partition": approval_args1["available_partition"]\n}\ntry:\n    response = requests.post("http://api.aliyun.com/ecs", json.dumps(data), timeout=10)\nexcept Exception as exc:\n    print("请求阿里云失败: {}".format(exc))\n    exit(1)\nprint("处理结果:\n{}".format(response.text))\n',d='系统会将当前用户信息和用户申请参数以两个json字符串传入脚本\n返回数据格式必须为["username1", "username1"]类型json字符串\n返回空列表则本节点不需要审批\n脚本最长执行时间为15秒\n示例:\n#!/usr/bin/env python3\nimport sys\nimport json\nimport requests\n\nuser_info = json.loads(sys.argv[1])\napplication_args = json.loads(sys.argv[2])\nserver_name = application_args["server_name"]\ntry:\n    response = requests.get("http://cmdb.hellobike.cn/resources/ecs?server_name={}".format(server_name), timeout=10)\nexcept Exception:\n    print("请求CMDB失败")\n    exit(1)\nserver_info = response.json()\nteam_name = server_info["team_name"]\ntry:\n    response = requests.post("http://cmdb.hellobike.cn/api/getTeamLeaders/", data=json.dumps({"name": team_name}), timeout=10)\nexcept Exception:\n    print("请求CMDB失败")\n    exit(1)\nleaders = [item["user_name"].split("@")[0] for item in response.json()["data"]]\nprint(json.dumps(leaders))',u={schema_placeholder:r,optional_value_placeholder:s,verification_placeholder:l,process_placeholder:c,approver_script_placeholder:d},p={props:{template:{default:null,required:!1}},data:function(){return{active:"0",is_visible:!0,store:o["a"],form_data:this.template?{}:{disabled:!1,approval_node_start:[],generation:1},form_errors:{},groups:[],loading:!1,submit_loading:!1,schema_placeholder:u.schema_placeholder,variables:u,appl_options:{mode:"text/javascript"}}},mounted:function(){this.template&&this.get_data()},methods:{get_data:function(){var e=this,t="work/template/".concat(this.template.id);this.loading=!0,this.g_master_api.get(t).then((function(t){e.loading=!1,e.init_data(t.data)})).catch((function(t){e.loading=!1}))},init_data:function(e){e.application_schema=JSON.stringify(e.application_schema,null,"\t"),e.script_schema=JSON.stringify(e.script_schema,null,"\t"),e.approval_node_start||(e.approval_node_start=[]),this.form_data=e},on_submit:function(){var e=this,t=this.template?"work/template/".concat(this.template.id):"work/template",a=Object.assign({},this.form_data);a.application_schema||(a.application_schema="{}"),a.script_schema||(a.script_schema="{}");try{a.application_schema=JSON.parse(a.application_schema)}catch(n){return void this.$message.error("申请参数schema必须为json格式 请检查格式是否有误")}try{a.script_schema=JSON.parse(a.script_schema)}catch(n){return void this.$message.error("脚本参数schema必须为json格式 请检查格式是否有误")}this.submit_loading=!0,this.g_master_api({method:this.template?"put":"post",url:t,data:a}).then((function(t){e.submit_loading=!1,e.$message.success(e.template?"更新成功":"创建成功"),e.add_update_template(t.data),e.on_close()})).catch((function(t){e.submit_loading=!1,t.response&&(e.form_errors=t.response.data)}))},add_update_template:function(e){this.$emit("refresh")},create:function(){},update:function(){},on_previous_step:function(){this.active=String(Number(this.active)-1)},on_next_step:function(){this.active=String(Number(this.active)+1)},on_close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.is_visible=!0,this.$confirm("确认退出编辑","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$el.parentNode.removeChild(e.$el),e.$destroy()})).catch((function(){}))):(this.$el.parentNode.removeChild(this.$el),this.$destroy())}}},f=p,m=a("8b2e"),_=Object(m["a"])(f,n,i,!1,null,null,null);t["default"]=_.exports},"33aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},3419:function(e,t,a){"use strict";t["a"]={props:{},data:function(){return{is_visible:!0,close_confirm:!0}},mounted:function(){},methods:{on_before_close:function(e){var t=this;this.close_confirm?this.$confirm("确认关闭？").then((function(a){e(),t._remote_child()})).catch((function(e){})):(e(),this._remote_child())},on_close:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t?(this.is_visible=!0,this.$confirm("确认关闭","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e._remote_child(),e.$destroy()})).catch((function(){}))):(this.is_visible=!0,setTimeout((function(){e._remote_child(),e.$destroy()}),2e3))},_remote_child:function(){this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}}},3533:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o={name:"Overview"},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"29158b0f",null);t["default"]=l.exports},"35d60":function(e,t,a){var n={"./About.vue":"f820","./Blank.vue":"9de2","./Home.vue":"bb51","./app/App.vue":"7104","./app/components/CreateUpdate.vue":"700f","./app/components/PostTask.vue":"7df1d","./app/components/PreTask.vue":"0c53","./cluster/Cluster.vue":"bdd5","./cluster/components/Create.vue":"eae8","./cluster/components/Graph.vue":"5213","./cmdb/Cmdb.vue":"8a76","./cmdb/Search.vue":"fa78","./cmdb/components/AddData.vue":"e613b","./cmdb/components/ChangeData.vue":"a0eb","./cmdb/components/DataDetail.vue":"0c20","./cmdb/components/DataItem.vue":"d2f1","./cmdb/components/HistoricalRecord.vue":"5eb0","./cmdb/components/ShowTable.vue":"bfd5","./frame/Frame.vue":"4d4e","./frame/components/Header.vue":"ce55","./frame/components/Menu.vue":"f4c2","./frame/components/MenuItem.vue":"8e4b","./frame/components/Settings.vue":"a7fc","./group/App.vue":"1992","./group/Group.vue":"9823","./group/components/Create.vue":"ca21","./group/components/Graph.vue":"ea63","./host/Host.vue":"512f","./host/components/Create.vue":"08e8","./host/components/Graph.vue":"33aa","./instance/Instance.vue":"e753","./instance/components/Create.vue":"3957","./instance/components/Graph.vue":"6b81","./instance/components/History.vue":"ae8b","./instance_record/InstanceRecord.vue":"4675","./login/Login.vue":"ede4","./mgmt/Cluster.vue":"7a84","./mgmt/Env.vue":"6dee","./mgmt/Group.vue":"82f4","./overview/Overview.vue":"3533","./release/Release.vue":"4115","./release/components/Create.vue":"c3da","./release/components/Graph.vue":"bee3","./release/components/NodeDetail.vue":"90b9","./storage/Storage.vue":"ebcc","./storage/components/Graph.vue":"163c","./test/Test.vue":"65d4","./test/components/TestUpdate.vue":"9017","./workflow/Center.vue":"8f77","./workflow/components/AppItem.vue":"484a","./workflow/components/ConditionNode.vue":"e474","./workflow/components/EditNode.vue":"ba82","./workflow/components/ExecuteNode.vue":"3126","./workflow/components/TemplateFlow.vue":"5b42","./workflow/components/TemplateUpdate.vue":"c660"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="35d60"},3842:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("1991");var n=a("f121"),i=a("f3e4"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=window.location.href),Object(i["c"])("sessionid","",-1);var t=encodeURIComponent(e);window.open("https://oapi.dingtalk.com/connect/qrconnect?appid=".concat(n["a"].app_id,"&response_type=code&scope=snsapi_login&redirect_uri=").concat(t),name="_self")}},3957:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"3bc1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dropdown",{attrs:{size:e.size},on:{command:e.on_command}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#FFFFFF"},style:{fontSize:e.font_size}},[e._v(" "+e._s(void 0==e.inner_value?this.placeholder:e.id_name_map[e.inner_value])),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.options,(function(t){return a("el-dropdown-item",{attrs:{index:t[e.value_field],command:t[e.value_field]}},[e._v(e._s(t[e.display_field])+" ")])})),1)],1)},i=[],o=a("2639"),r=a("4c20"),s=a.n(r),l={name:"GRemoteDropdown",props:{value:{},params:{type:Object,default:function(){return{}}},placeholder:{default:"输入关键字搜索"},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},url:{type:String,required:!0},results_field:{default:"results"},value_field:{type:String,required:!0},display_field:{required:!0},disabled_field:{type:String,required:!1},size:{type:String,default:""},font_size:{type:String,default:"20px"},value_key:{type:String,default:"value"},disabled:Boolean,disable_query:Boolean,option_formatter:Function,auto_select_first:{type:Boolean,default:!1}},data:function(){return{inner_value:this.value,options:[],filtered_options:[],query_loading:!1,id_name_map:{},id_node_map:{}}},mounted:function(){if(void 0==this.value_field&&void 0==this.value_key)throw Error("prop 参数 value_field 和 key_field 不能同时为空 ");this.get_options()},methods:{on_command:function(e){var t=this.id_name_map[e],a=this.id_node_map[e];this.inner_value=e,this.$emit("input",e),this.$emit("change",e,t,a)},get_options:function(){var e=this;this.disable_query||this.$c_master.get(this.url,{params:this.params}).then((function(t){e.results_field?e.options=t.data[e.results_field]:e.options=t.data;var a,n=Object(o["a"])(e.options);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.id_name_map[i[e.value_field]]=i[e.display_field],e.id_node_map[i[e.value_field]]=i}}catch(r){n.e(r)}finally{n.f()}e.auto_select_first&&e.options.length&&e.on_command(e.options[0][e.value_field])})).catch((function(t){console.error(t),s.a.isCancel(t)?console.log("remote select cancel error"):e.$message.error("获取下拉列表失败")}))},clean_options:function(){this.options=[]}},watch:{value:function(e,t){e!==t&&(this.inner_value=e)},url:function(e,t){this.get_options()},params:function(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.get_options()}}},c=l,d=a("8b2e"),u=Object(d["a"])(c,n,i,!1,null,null,null);t["default"]=u.exports},"3f16":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":e.reserveKeyword,clearable:e.clearable,multiple:e.multiple,placeholder:e.placeholder,"remote-method":e.on_query,size:e.size,"value-key":e.value_key,loading:e.query_loading,disabled:e.disabled,"allow-create":e.allowCreate},model:{value:e.inner_value,callback:function(t){e.inner_value=t},expression:"inner_value"}},[e._t("default"),e._l(e.options,(function(t,n){return a("el-option",{key:void 0==e.value_field?n:t[e.value_field],attrs:{label:e.option_formatter?e.option_formatter(t,n):Array.isArray(e.display_field)?e.display_field.map((function(e){return t[e]})).join(" | "):t[e.display_field],value:void 0==e.value_field?t:t[e.value_field],disabled:e.whether_disable(t)}})})),e.disable_query?e._e():a("el-button",{staticStyle:{width:"100%",color:"#9A9A9A"},attrs:{type:"text",disabled:e.count<e.inner_params.page_size,size:"small",loading:e.more_loading},on:{click:e.load_more}},[e._v(" 加载更多 ")])],2)},i=[],o=(a("1991"),a("dfea"),a("d8b2"),a("9ecd"),a("8843"),a("35d6")),r=a("4c20"),s=a.n(r),l={name:"GRemoteQuerySelect",props:{value:{},placeholder:{default:"输入关键字搜索"},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},url:{type:String,required:!1},params:{type:Object,default:function(){return{}}},results_field:{default:"results"},value_field:{type:String,required:!1},display_field:{required:!1},disabled_field:{type:String,required:!1},disabled_func:Function,size:{type:String,default:"medium"},reserveKeyword:{type:Boolean,default:!1},value_key:{type:String,default:"value"},auto_select_first:{type:Boolean,default:!1},force_auto_select_first:{type:Boolean,default:!1},disabled:Boolean,disable_query:Boolean,option_formatter:Function,allowCreate:Boolean},data:function(){return{inner_value:this.value,options:[],filtered_options:[],query_loading:!1,more_loading:!1,count:0,inner_params:{page_size:10,page:1,search:""},source:s.a.CancelToken.source(),first_get_options:!0}},mounted:function(){if(!this.disable_query&&void 0==this.value_field&&void 0==this.value_key)throw Error("prop 参数 value_field 和 key_field 不能同时为空 ");if(!this.disable_query&&void 0==this.display_field&&void 0==this.option_formatter)throw Error("prop 参数 display_field 和 option_formatter 不能同时为空 ");this.init_options()},methods:{init_options:function(){var e=this;if(void 0==this.value_field&&this.multiple&&Array.isArray(this.inner_value)&&this.inner_value.length>0)return this.options=Object.assign(this.inner_value),void this.get_data();if(void 0==this.value_field&&!this.multiple&&"object"==Object(o["a"])(this.inner_value))return this.options=[this.inner_value],void this.get_data();var t=[];if(Array.isArray(this.inner_value)?t=this.inner_value:this.inner_value&&(t=[this.inner_value]),t.length&&!this.disable_query){var a=t.map((function(t){return e.g_master_api.get("".concat(e.url,"/").concat(t))}));s.a.all(a).then(s.a.spread((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];e.options=a.map((function(e){return e.data})),e.get_data(!0)})))}else this.get_data()},get_data:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.source.cancel("有新查询 取消老的查询"),this.source=s.a.CancelToken.source(),!this.disable_query){t?this.more_loading=!0:this.query_loading=!0;var a=Object.assign({},this.inner_params,this.params);this.g_master_api.get(this.url,{params:a,cancelToken:this.source.token}).then((function(a){t?(e.more_loading=!1,e.options=e.options.concat(a.data[e.results_field])):(e.query_loading=!1,e.options=a.data[e.results_field]),e.count=a.data[e.results_field].length,console.log("this.force_auto_select_first: ",e.force_auto_select_first),e.auto_select_first&&e.first_get_options&&e.options.length&&(console.log("in..."),e.multiple&&(e.force_auto_select_first||0==e.inner_value.length)?e.inner_value=[void 0==e.value_field?e.options[0]:e.options[0][e.value_field]]:(e.force_auto_select_first||[void 0,null,""].includes(e.inner_value))&&(e.inner_value=void 0==e.value_field?e.options[0]:e.options[0][e.value_field])),console.log("this.inner_value: ",e.inner_value),e.first_get_options=!1})).catch((function(a){t?e.more_loading=!1:e.query_loading=!1}))}},on_query:function(e){this.disable_query||(this.inner_params.search=e,this.inner_params.page=1,this.get_data())},load_more:function(){this.inner_params.page+=1,this.get_data(!0)},whether_disable:function(e){return this.disabled_func?this.disabled_func(e):!!this.disabled_field&&Boolean(e[this.disabled_field])},clean_options:function(){this.options=[]}},watch:{value:function(e,t){e!==t&&(this.inner_value=e)},inner_value:function(e){this.$emit("input",e),this.$emit("change",e)},url:function(){this.inner_params.page=1,this.get_data()}}},c=l,d=a("8b2e"),u=Object(d["a"])(c,n,i,!1,null,null,null);t["default"]=u.exports},"3f8d":function(e,t,a){"use strict";a.r(t),a.d(t,"TYPE_MAP",(function(){return n})),a.d(t,"release_status_color_map",(function(){return i}));var n={0:"字符串",1:"整数",2:"浮点数",3:"日期时间",4:"日期",5:"布尔",6:"IP地址"},i={30:"#409EFF",70:"#67C23A"}},4115:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.add_dialog("LReleaseCreate")}}},[e._v("New ")]),a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"app name",prop:"app_name",width:"90px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"user",prop:"operation_user__username",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"status",width:"100px",prop:"status__display",sortable:"","column-key":"status","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.maps.release_status_color_map[t.row.status]}},[e._v(e._s(t.row.status__display))])]}}])}),a("el-table-column",{attrs:{label:"version",prop:"version","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"overview",prop:"overview","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"succeed/all",width:"110px",formatter:function(e,t,a,n){return e.succeed_count+" / "+e.instance_count},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",width:"140px",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ops",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.add_dialog("LReleaseGraph",{release:t.row})}}},[e._v(" Graph ")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("7fa4"),r=a("3f8d"),s={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/releases",params:{app_name:this.$store.state.current_app_name,ordering:"-id"},maps:r}},mounted:function(){this.get_data()},methods:{}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},4278:function(e,t,a){},4360:function(e,t,a){"use strict";a("4663");var n=a("5601"),i=a("c373"),o=a("97a5"),r=a.n(o);a("0dbb");n["default"].use(i["a"]),t["a"]=new i["a"].Store({state:{user_info:{},user_permissions:[],user_menus:[],in_request_count:0,current_app_id:null,current_app_name:null},mutations:{set_user_info:function(e,t){e.user_info=t},set_user_permissions:function(e,t){e.user_permissions=t},set_user_menus:function(e,t){e.user_menus=t},add_request_count:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.in_request_count+=t,r.a.start()},reduce_request_count:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.in_request_count-=t,r.a.inc(.2),e.in_request_count<=0&&r.a.done()},clear_request_count:function(e){e.in_request_count=0,r.a.done()},change_current_app:function(e,t){e.current_app_id=t.id,e.current_app_name=t.name}},actions:{},modules:{}})},4675:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"Instance name/Server IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"instance_name",prop:"instance_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"app_name",prop:"app_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"cluster_name",prop:"cluster_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"server_ip",prop:"server_ip","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"current stage",prop:"current_stage__display",sortable:"","column-key":"current_stage","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"80",label:"status",prop:"status__display","column-key":"status","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("7fa4"),r=a("3f8d"),s={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/instance-release-records",params:{app_name:this.$store.state.current_app_name,ordering:"-id"},maps:r}},mounted:function(){this.get_data()},methods:{}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},"484a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{nativeOn:{click:function(t){return e.g_add_dialog("LWorkflowTemplateUpdate")}}},[a("div",[e._v(e._s(e.item.name))]),a("div",[a("el-button",{on:{click:function(t){return t.stopPropagation(),e.g_add_dialog("LWorkflowTemplateFlow",{template:e.item})}}},[e._v(" Edit flow ")])],1)])},i=[],o={props:["item"]},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"66005fa3",null);t["default"]=l.exports},"4d4e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{display:"flex","flex-flow":"column",height:"100%","min-width":"1300px",overflow:"auto"}},[a("header",{staticStyle:{height:"80px"}},[a("l-frame-header",{attrs:{slot:"header",site_name:"Release",user_info:e.$store.state.user_info,api_url:"api-docs",update_logs:e.update_logs,loading:!!e.$store.state.in_request_count,chrome_check:""},slot:"header"})],1),a("section",{staticStyle:{flex:"1",display:"flex","flex-flow":"row"}},[a("df-menu",{attrs:{slot:"menu",menus:e.$store.state.filtered_menus},slot:"menu"}),a("main",{staticStyle:{height:"100%",flex:"1",padding:"20px",overflow:"auto"}},[e.refreshing?e._e():a("router-view",{ref:"main",attrs:{slot:"main"},slot:"main"})],1)],1)])},i=[],o=(window.location.protocol,window.location.host,[]),r={data:function(){return{update_logs:o,refreshing:!1}},mounted:function(){var e=this;this.$store.state.user_info.id&&this.$df_add_dialog("dfUpdateLog",{update_logs:o,check_new:!0}),this.$root.$on("change_current_app_id",(function(){e.refreshing=!0,e.$nextTick((function(){e.refreshing=!1}))}))},methods:{on_click:function(){var e=this;this.refreshing=!0,this.$nextTick((function(){e.refreshing=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"4e48":function(e,t,a){},"512f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ip",prop:"ip","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ssh_port",prop:"ssh_port","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"cluster",prop:"cluster__name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/hosts",params:{app:this.$store.state.current_app_id}}},mounted:function(){this.get_data()},methods:{}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},5213:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"56d7":function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"g_datetime",(function(){return P})),a.d(n,"g_array_to_string",(function(){return L}));a("9c85"),a("ffae"),a("9ecd"),a("615c"),a("bc39"),a("a509"),a("2eb1"),a("2db5"),a("675b"),a("fdb4"),a("be90");var i=a("5601"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[a("router-view")],1)},r=[],s=(a("034f"),a("8b2e")),l={},c=Object(s["a"])(l,o,r,!1,null,null,null),d=c.exports,u=a("a18c"),p=a("4360"),f=a("a53e"),m=a.n(f),_=a("0f9f"),h=(a("96af"),a("a9d5"),a("e7f4")),g=a.n(h),v=a("4c20"),b=a.n(v),y=(a("f904"),a("7fa4")),w=a("d8ea"),x=a.n(w),k=a("cbf8"),$=a.n(k),S=(a("22e7"),a("c275"),a("ec57"),a("1991"),a("a646"),a("99ed"),a("2639")),j=a("f121"),O=a("3842"),C=function(e){var t=[];for(var a in e)if(""!==e[a]&&null!==e[a]&&void 0!=e[a])if(e[a]instanceof Array){var n,i=Object(S["a"])(e[a]);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.push("".concat(a,"=").concat(o))}}catch(s){i.e(s)}finally{i.f()}}else if(e[a]instanceof Date){var r=e[a];t.push("".concat(a,"=").concat(r.getFullYear(),"-").concat(r.getMonth()+1,"-").concat(r.getDate(),"T").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds()))}else t.push("".concat(a,"=").concat(e[a]));return t.join("&")},z=function e(t){var a,n=[],i=Object(S["a"])(t);try{for(i.s();!(a=i.n()).done;){var o=a.value;o instanceof Array?n.push(e(o)):o instanceof Object?n.push(E(o)):""===o?n.push(null):n.push(o)}}catch(r){i.e(r)}finally{i.f()}return n},E=function e(t){var a={};for(var n in t)t[n]instanceof Array?a[n]=z(t[n]):t[n]instanceof Object?a[n]=e(t[n]):""===t[n]?a[n]=null:a[n]=t[n];return a},T=b.a.create({baseURL:j["a"].base_url,timeout:2e4,paramsSerializer:C,withCredentials:!0});T.interceptors.request.use((function(e){return p["a"].commit("add_request_count"),e.data=E(e.data),e}),(function(e){return p["a"].commit("reduce_request_count"),Promise.reject(e)})),T.interceptors.response.use((function(e){return p["a"].commit("reduce_request_count"),e}),(function(e){if(p["a"].commit("reduce_request_count"),!e.response)return b.a.isCancel(e)?(console.log("跳转取消"),Promise.reject(e)):(e.message?f["Message"].error(e.message):f["Message"].error("unknow error"),Promise.reject(e));if(401!=e.response.status){if(e.response.status>=500)return f["Message"].error("服务器出错啦 请联系管理员"),Promise.reject(e);var t=e.response.data;return t.detail?f["Message"].error(t.detail):t.non_field_errors?f["Message"].error(String(t.non_field_errors).slice(0,100)):f["Message"].error(JSON.stringify(t).slice(0,100)),Promise.reject(e)}"user/users/get-my-info"==e.config.url?Object(O["a"])(window.location.href):u["a"].push({name:"login"})}));var N=T,q=a("d7f1"),P=(a("0ffe"),a("4663"),function(e){return e?e.substr(0,16):e}),L=function(e){return Array.isArray(e)?e.join("、"):e},B=a("19cf"),D=a("f3e4"),I=a("6809"),F={},A=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};window.Vue=e,console.log("options: ",a);var i={g_master_api:null};for(var o in a=Object.assign({},i,a),e.prototype.g_master_api=t,q)e.prototype[o]=q[o];for(var r in n)e.filter(r,n[r]);I.keys().forEach((function(t){var a=I(t);a.default.name&&e.component(a.default.name,a.default)}))};I.keys().forEach((function(e){var t=I(e);t.default.name&&(console.log("register component: ",t.default.name),F[t.default.name]=t.default)}));var M=Object.assign({},F,{install:A,mixins:B["b"],cookie:D["a"]});i["default"].config.productionTip=!1,i["default"].use(m.a),i["default"].use(g.a),i["default"].use(M,N),i["default"].use(y["a"],N),i["default"].use(_["a"]);a("6809");var R=a("35d60");for(var G in R.keys().forEach((function(e){if(4==e.split("/").length&&"components"==e.split("/")[2]){var t=R(e),a=x()($()(e.replace(/^\.\/(.*)\.\w+$/,"$1")));a="L"+a.split("Components")[0]+a.split("Components")[1],console.log("component_name",a),i["default"].component(a,t.default)}})),q)i["default"].prototype[G]=q[G];new i["default"]({router:u["a"],store:p["a"],render:function(e){return e(d)}}).$mount("#app")},"5b42":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{ref:"aaaa",attrs:{title:"我是标题",visible:e.is_visible,"before-close":e.on_before_close,size:"1000px"},on:{"update:visible":function(t){e.is_visible=t}}},[a("g-flow-chart",{ref:"flow_chart",staticStyle:{height:"400px"},on:{on_click_node:e.on_click_node,external_objects_dropped:e.create_node,selection_moved:e.move_node,selection_deleted:e.delete_node}}),a("el-button",{on:{click:e.save_links}},[e._v("保存连接")])],1)},i=[],o=(a("1991"),a("4663"),a("2410"),a("9ecd"),a("bc39"),a("2639")),r=a("4c20"),s=a.n(r),l=a("3419"),c={props:["template"],mixins:[l["a"]],data:function(){return{type_label_value_map:null,node_id_node_map:{},type_value_label_map:{},item:{id:1}}},mounted:function(){this.get_type_map(),this.load_data()},methods:{on_click_node:function(){},create_node:function(e){var t=this,a=Number(e.loc.split(" ")[0]),n=Number(e.loc.split(" ")[0]),i={template:this.template.id,name:e.text,type:this.type_label_value_map[e.category],location_x:a,location_y:n};this.g_master_api.post("workflow/nodes",i=i).then((function(a){t.$refs.flow_chart.set_key_for_node_data(e,a.data.id),t.node_id_node_map[a.data.id]=a.data}))},get_type_map:function(){var e=this;this.g_master_api.get("workflow/nodes/get-choices?field_name=type").then((function(t){e.type_label_value_map=t.data["label_value_map"],e.type_value_label_map=t.data["value_label_map"]}))},delete_node:function(e){var t=this,a="workflow/nodes/".concat(e.key);this.g_master_api.delete(a).then((function(e){t.$message.success("删除成功")}))},move_node:function(e){var t=Number(e.loc.split(" ")[0]),a=Number(e.loc.split(" ")[0]),n="workflow/nodes/".concat(e.key),i={location_x:t,location_y:a};this.g_master_api.patch(n,i=i)},save_links:function(){var e=this,t=this.$refs.flow_chart.get_data();console.log("data: ",t),console.log("data.linkDataArray: ",t.linkDataArray);var a,n=[],i=Object(o["a"])(t.linkDataArray);try{for(i.s();!(a=i.n()).done;){var r=a.value,s={template:this.template.id,from_node:r.from,to_node:r.to};n.push(s)}}catch(c){i.e(c)}finally{i.f()}t={link_list:n};var l="workflow/templates/".concat(this.template.id,"/set-link");this.g_master_api.post(l,t).then((function(t){e.$message.success("保存成功")}))},load_data:function(){var e={template_id:this.template.id,page_size:100},t={template_id:this.template.id,page_size:100},a=this,n=this.g_master_api.get("workflow/nodes",{params:e}),i=this.g_master_api.get("workflow/links",{params:t});s.a.all([n,i]).then(s.a.spread((function(e,t){console.log("node_response: ",e);var n,i=[],r=Object(o["a"])(e.data.results);try{for(r.s();!(n=r.n()).done;){var s=n.value,l={category:a.type_value_label_map[s.type],key:s.id,loc:"".concat(s.location_x," ").concat(s.location_y),text:s.name};i.push(l)}}catch(m){r.e(m)}finally{r.f()}var c,d=[],u=Object(o["a"])(t.data.results);try{for(u.s();!(c=u.n()).done;){var p=c.value;l={from:p.from_node,to:p.to_node,from_port:p.from_port,to_port:p.to_port};d.push(l)}}catch(m){u.e(m)}finally{u.f()}var f={class:"go.GraphLinksModel",linkfrom_portIdProperty:"from_port",linkto_portIdProperty:"to_port",nodeDataArray:i,linkDataArray:d};console.log("data: ",f),a.$refs.flow_chart.set_data(f)})))}}},d=c,u=a("8b2e"),p=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=p.exports},"5c68":function(e,t,a){},"5eb0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"1000px",title:e.data_index+" "+e.data_id+" 历史版本",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[e.data.length>0?a("el-table",{attrs:{data:e.data,"max-height":e.max_height,stripe:""}},[a("el-table-column",{attrs:{prop:"S-changer",label:"修改者",fixed:""}}),a("el-table-column",{attrs:{prop:"S-update-time",label:"修改时间",fixed:""}}),e._l(e.data[0],(function(t,n){return"S"!=n[0]?a("el-table-column",{key:n,attrs:{label:n},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",{style:{color:null==t?"#C0C4CC":"#606266"}},[e._v(e._s(null==i.row[n]?"null":i.row[n]))])]}}],null,!0)}):e._e()}))],2):a("p",{staticStyle:{"text-align":"center"}},[e._v("没有修改记录")])],1)},i=[],o=(a("1991"),{data:function(){return{is_visible:!0,data:[],max_height:0}},props:["data_index","data_id"],mounted:function(){var e=this;this.max_height=.65*window.innerHeight>420?.65*window.innerHeight:420,console.log("height:",this.max_height),this.$g_master_api.get("cmdb/record-data/".concat(this.data_index,"/").concat(this.data_id)).then((function(t){for(var a in t.data.hits)e.data.push(t.data.hits[a]["_source"])})).catch((function(t){t.response&&t.response.data&&e.$message.error(t.response.data),console.log(t.message)}))},methods:{on_close:function(){console.log("this.id:2",this.data_id),this.$el.parentNode.removeChild(this.$el),this.$destroy()}}}),r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},"607b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[a("el-button",{on:{click:e.do_change}}),a("div",{staticStyle:{width:"200px","margin-right":"2px","background-color":"rgb(40, 44, 52)","--darkreader-inline-bgcolor":"#20232a"},attrs:{id:"myPaletteDiv","data-darkreader-inline-bgcolor":""}}),a("div",{staticStyle:{"flex-grow":"1",height:"750px","background-color":"rgb(40, 44, 52)","--darkreader-inline-bgcolor":"#20232a"},attrs:{id:"myDiagramDiv","data-darkreader-inline-bgcolor":""}})],1)},i=[],o=(a("a8cd"),a("8310"),a("661f")),r=a.n(o),s=(a("a53e"),{name:"GFlowChart",data:function(){return{diagram:null,last_selected_node:null}},mounted:function(){this.init()},methods:{do_change:function(){},init:function(){var e=this;window.goSamples&&goSamples();var t=r.a.GraphObject.make,a=t(r.a.Diagram,"myDiagramDiv",{LinkDrawn:s,LinkRelinked:s,"undoManager.isEnabled":!0});function n(){return[new r.a.Binding("location","loc",r.a.Point.parse).makeTwoWay(r.a.Point.stringify),{locationSpot:r.a.Spot.Center}]}function i(e,a,n,i,o){var s=a.equals(r.a.Spot.Top)||a.equals(r.a.Spot.Bottom);return t(r.a.Shape,{fill:"transparent",strokeWidth:0,width:s?NaN:8,height:s?8:NaN,alignment:a,stretch:s?r.a.GraphObject.Horizontal:r.a.GraphObject.Vertical,portId:e,fromSpot:n,fromLinkable:i,toSpot:n,toLinkable:o,cursor:"pointer",mouseEnter:function(e,t){e.diagram.isReadOnly||(t.fill="rgba(255,0,255,0.5)")},mouseLeave:function(e,t){t.fill="transparent"}})}function o(){return{font:"bold 11pt Lato, Helvetica, Arial, sans-serif",stroke:"#F8F8F8"}}function s(e){var t=e.subject.findObject("LABEL");null!==t&&(t.visible="conditional"===e.subject.fromNode.data.category)}this.diagram=a,this.diagram.addDiagramListener("Modified",(function(e){var t=document.getElementById("SaveButton");t&&(t.disabled=!this.diagram.isModified);var n=document.title.indexOf("*");a.isModified?n<0&&(document.title+="*"):n>=0&&(document.title=document.title.substr(0,n))})),this.diagram.addDiagramListener("ObjectSingleClicked",(function(t){console.log("e: ",t),console.log("e.subject.part.data: ",t.subject.part.data),e.last_selected_node=t.subject.part.data})),this.diagram.addDiagramListener("PartCreated",(function(e){console.log("e: ",e)})),this.diagram.addDiagramListener("LinkDrawn",(function(t){console.log("e: ",t),console.log("e.subject.fromPort: ",t.subject.fromPort),e.$emit("link_drawn",t.subject.data)})),this.diagram.addDiagramListener("LinkReshaped",(function(e){console.log("e: ",e)})),this.diagram.addDiagramListener("ExternalObjectsDropped",(function(t){console.log("e: ",t);var n=a.selection.first();e.$emit("external_objects_dropped",n.data)})),this.diagram.addDiagramListener("Modified",(function(e){console.log("e: ",e);var t=a.selection.first();console.log("node: ",t)})),this.diagram.addDiagramListener("SelectionDeleted",(function(t){console.log("e: ",t),console.log("self.last_selected_node: ",e.last_selected_node),e.last_selected_node.hasOwnProperty("category")&&e.$emit("selection_deleted",e.last_selected_node)})),this.diagram.addDiagramListener("ViewportBoundsChanged",(function(e){})),this.diagram.addDiagramListener("SelectionMoved",(function(t){console.log("e: ",t);var n=a.selection.first();e.$emit("selection_moved",n.data)})),this.diagram.addDiagramListener("LinkRelinked",(function(t){e.$emit("link_relinked",t.subject.part.data)})),a.addModelChangedListener((function(t){if(t.isTransactionFinished){var a=t.object;null!==a&&a.changes.each((function(e){"nodeDataArray"===e.modelChange&&(e.change===r.a.ChangedEvent.Insert?(console.log(e),console.log(t.propertyName+" added node with key: "+e.newValue.key)):e.change===r.a.ChangedEvent.Remove&&(console.log(e),console.log(t.propertyName+" removed node with key: "+e.oldValue.key)))}))}else{var n=e.diagram.commandHandler;n.canDeleteSelection=function(){console.log("evt: ",t);var e=confirm("确认删除?");return e}}})),this.diagram.nodeTemplateMap.add("execute",t(r.a.Node,"Table",n(),t(r.a.Panel,"Auto",t(r.a.Shape,"Rectangle",{fill:"#282c34",stroke:"#00A9C9",strokeWidth:3.5},new r.a.Binding("figure","figure")),t(r.a.TextBlock,o(),{margin:8,maxSize:new r.a.Size(160,NaN),wrap:r.a.TextBlock.WrapFit,editable:!0},new r.a.Binding("text").makeTwoWay())),i("T",r.a.Spot.Top,r.a.Spot.TopSide,!1,!0),i("L",r.a.Spot.Left,r.a.Spot.LeftSide,!0,!0),i("R",r.a.Spot.Right,r.a.Spot.RightSide,!0,!0),i("B",r.a.Spot.Bottom,r.a.Spot.BottomSide,!0,!1))),this.diagram.nodeTemplateMap.add("conditional",t(r.a.Node,"Table",n(),t(r.a.Panel,"Auto",t(r.a.Shape,"Diamond",{fill:"#282c34",stroke:"#00A9C9",strokeWidth:3.5},new r.a.Binding("figure","figure")),t(r.a.TextBlock,o(),{margin:8,maxSize:new r.a.Size(160,NaN),wrap:r.a.TextBlock.WrapFit,editable:!0},new r.a.Binding("text").makeTwoWay())),i("T",r.a.Spot.Top,r.a.Spot.Top,!1,!0),i("L",r.a.Spot.Left,r.a.Spot.Left,!0,!0),i("R",r.a.Spot.Right,r.a.Spot.Right,!0,!0),i("B",r.a.Spot.Bottom,r.a.Spot.Bottom,!0,!1))),this.diagram.nodeTemplateMap.add("start",t(r.a.Node,"Table",n(),t(r.a.Panel,"Spot",t(r.a.Shape,"Circle",{desiredSize:new r.a.Size(70,70),fill:"#282c34",stroke:"#09d3ac",strokeWidth:3.5}),t(r.a.TextBlock,"Start",o(),new r.a.Binding("text"))),i("L",r.a.Spot.Left,r.a.Spot.Left,!0,!1),i("R",r.a.Spot.Right,r.a.Spot.Right,!0,!1),i("B",r.a.Spot.Bottom,r.a.Spot.Bottom,!0,!1))),this.diagram.nodeTemplateMap.add("end",t(r.a.Node,"Table",n(),t(r.a.Panel,"Spot",t(r.a.Shape,"Circle",{desiredSize:new r.a.Size(60,60),fill:"#282c34",stroke:"#DC3C00",strokeWidth:3.5}),t(r.a.TextBlock,"End",o(),new r.a.Binding("text"))),i("T",r.a.Spot.Top,r.a.Spot.Top,!1,!0),i("L",r.a.Spot.Left,r.a.Spot.Left,!1,!0),i("R",r.a.Spot.Right,r.a.Spot.Right,!1,!0))),r.a.Shape.defineFigureGenerator("File",(function(e,t,a){var n=new r.a.Geometry,i=new r.a.PathFigure(0,0,!0);n.add(i),i.add(new r.a.PathSegment(r.a.PathSegment.Line,.75*t,0)),i.add(new r.a.PathSegment(r.a.PathSegment.Line,t,.25*a)),i.add(new r.a.PathSegment(r.a.PathSegment.Line,t,a)),i.add(new r.a.PathSegment(r.a.PathSegment.Line,0,a).close());var o=new r.a.PathFigure(.75*t,0,!1);return n.add(o),o.add(new r.a.PathSegment(r.a.PathSegment.Line,.75*t,.25*a)),o.add(new r.a.PathSegment(r.a.PathSegment.Line,t,.25*a)),n.spot1=new r.a.Spot(0,.25),n.spot2=r.a.Spot.BottomRight,n})),this.diagram.nodeTemplateMap.add("Comment",t(r.a.Node,"Auto",n(),t(r.a.Shape,"File",{fill:"#282c34",stroke:"#DEE0A3",strokeWidth:3}),t(r.a.TextBlock,o(),{margin:8,maxSize:new r.a.Size(200,NaN),wrap:r.a.TextBlock.WrapFit,textAlign:"center",editable:!0},new r.a.Binding("text").makeTwoWay()))),this.diagram.linkTemplate=t(r.a.Link,{routing:r.a.Link.AvoidsNodes,curve:r.a.Link.JumpOver,corner:5,toShortLength:4,relinkableFrom:!0,relinkableTo:!0,reshapable:!0,resegmentable:!0,mouseEnter:function(e,t){t.findObject("HIGHLIGHT").stroke="rgba(30,144,255,0.2)"},mouseLeave:function(e,t){t.findObject("HIGHLIGHT").stroke="transparent"},selectionAdorned:!1},new r.a.Binding("points").makeTwoWay(),t(r.a.Shape,{isPanelMain:!0,strokeWidth:8,stroke:"transparent",name:"HIGHLIGHT"}),t(r.a.Shape,{isPanelMain:!0,stroke:"gray",strokeWidth:2},new r.a.Binding("stroke","isSelected",(function(e){return e?"dodgerblue":"gray"})).ofObject()),t(r.a.Shape,{toArrow:"standard",strokeWidth:0,fill:"gray"}),t(r.a.Panel,"Auto",{visible:!1,name:"LABEL",segmentIndex:2,segmentFraction:.5},new r.a.Binding("visible","visible").makeTwoWay(),t(r.a.Shape,"RoundedRectangle",{fill:"#F8F8F8",strokeWidth:0}),t(r.a.TextBlock,"Yes",{textAlign:"center",font:"10pt helvetica, arial, sans-serif",stroke:"#333333",editable:!0},new r.a.Binding("text").makeTwoWay()))),this.diagram.toolManager.linkingTool.temporaryLink.routing=r.a.Link.Orthogonal,this.diagram.toolManager.relinkingTool.temporaryLink.routing=r.a.Link.Orthogonal;t(r.a.Palette,"myPaletteDiv",{"animationManager.initialAnimationStyle":r.a.AnimationManager.None,InitialAnimationStarting:l,nodeTemplateMap:a.nodeTemplateMap,model:new r.a.GraphLinksModel([{category:"start",text:"start"},{category:"execute",text:"execute"},{category:"conditional",text:"conditional"},{category:"end",text:"end"},{category:"Comment",text:"subprocess"}])});function l(e){var t=e.diagram,a=new r.a.Animation;a.isViewportUnconstrained=!0,a.easing=r.a.Animation.EaseOutExpo,a.duration=900,a.add(t,"position",t.position.copy().offset(0,200),t.position),a.add(t,"opacity",0,1),a.start()}},save:function(){document.getElementById("mySavedModel").value=this.diagram.model.toJson(),this.diagram.isModified=!1},set_data:function(e){this.diagram.model=r.a.Model.fromJson(e)},get_data:function(){var e=this.diagram.model.toJson(),t=JSON.parse(e);return t},set_text_for_key:function(e,t){var a=this.diagram.findNodeForKey(e);this.diagram.model.commit((function(e){e.set(a.data,"text",t)}))},set_key_for_node_data:function(e,t){this.diagram.model.commit((function(a){a.setKeyForNodeData(e,t)}))}}}),l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,"6a39e59b",null);t["default"]=d.exports},"65d4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("test")]),a("g-monaco-editor",{staticStyle:{height:"200px"}})],1)},i=[],o={data:function(){return{selected:[],data:[{name:"Start",status:"start",next:[{index:1,weight:2},{index:2,weight:2}]},{name:"前置动作|192.168.1.128",status:"success",next:[{index:3,weight:2}]},{name:"前置动作|192.168.1.128",status:"success",next:[{index:4,weight:2}]},{name:"写入配置|192.168.1.128",status:"success",next:[{index:5,weight:2}]},{name:"写入配置|192.168.1.128",status:"success",next:[{index:6,weight:2}]},{name:"传程序包|192.168.1.128",status:"running",next:[{index:7,weight:1}]},{name:"传程序包|192.168.1.128",status:"running",next:[{index:8,weight:1}]},{name:"",status:"end",next:[{index:9,weight:1}]},{name:"",status:"end",next:[{index:10,weight:1}]},{name:"",status:"end",next:[{index:11,weight:1}]},{name:"",status:"end",next:[{index:11,weight:1}]},{name:"End",status:"end",next:[]}],release:{id:12}}},mounted:function(){},methods:{on_select:function(e){console.log(e)},on_click:function(){this.$delete()}},beforeUpdate:function(){console.log("this.beforeUpdates")},beforeDestroy:function(){console.log("this.beforeDestroy")}},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},6809:function(e,t,a){var n={"./HelloWorld.vue":"fdab","./env-tree/EnvTree.vue":"dba9","./flow-chart/FlowChart.vue":"607b","./monaco-editor/MonacoEditor.vue":"81a3","./page-header/Index.vue":"7630b","./remote-dropdown/RemoteDropdown.vue":"3bc1","./remote-query-select/RemoteQuerySelect.vue":"3f16","./remote-select/RemoteSelect.vue":"c1a8"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="6809"},6986:function(e,t,a){var n={"./cart-panel/Index.vue":"dd98","./date-range/Index.vue":"ade6","./export/Index.vue":"8ae7","./header/Index.vue":"4d9e","./menu/Index.vue":"0462","./menu/components/Item.vue":"bf15","./option-bar/Index.vue":"122b","./remote-query-select/Index.vue":"baa9","./remote-select/Index.vue":"26ab","./report/Index.vue":"627c","./report/components/CreateUpdateDash.vue":"6ced","./report/components/CreateUpdateFilter.vue":"66e1","./report/components/CreateUpdateGraph.vue":"4d25","./report/components/CreateUpdateRow.vue":"6bd2","./report/components/Filters.vue":"463b","./report/components/Graph.vue":"427a","./report/components/List.vue":"0966","./report/components/Row.vue":"61d6","./report/components/Table.vue":"ded5","./search/Index.vue":"73e6","./table-column/Index.vue":"8228","./update-log/Index.vue":"4fca"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="6986"},"6a66":function(e,t,a){"use strict";a("5c68")},"6b81":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"6bc4":function(e,t,a){},"6dee":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o={name:"Env"},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"fd0da9a8",null);t["default"]=l.exports},"700f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.item?"Modify app-"+e.item.name:"Add app",visible:e.is_visible,width:"800px",top:"10vh"},on:{"update:visible":function(t){e.is_visible=t},close:function(t){return e.on_close(!0)}}},[a("div",[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"medium"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Name:",error:e.form_errors.name,required:""}},[a("el-input",{model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:"form_data.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Kill number:",error:e.form_errors.kill_number}},[a("el-input",{model:{value:e.form_data.kill_number,callback:function(t){e.$set(e.form_data,"kill_number",t)},expression:"form_data.kill_number"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Need start:",error:e.form_errors.need_start}},[a("el-switch",{model:{value:e.form_data.need_start,callback:function(t){e.$set(e.form_data,"need_start",t)},expression:"form_data.need_start"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Only main:",error:e.form_errors.only_main_program}},[a("el-switch",{model:{value:e.form_data.only_main_program,callback:function(t){e.$set(e.form_data,"only_main_program",t)},expression:"form_data.only_main_program"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Main name:",error:e.form_errors.main_program_name}},[a("el-input",{attrs:{placeholder:"主程序名 用于kill -2 寻找进程名"},model:{value:e.form_data.main_program_name,callback:function(t){e.$set(e.form_data,"main_program_name",t)},expression:"form_data.main_program_name"}})],1)],1)],1),a("el-form-item",{attrs:{label:"Pre-task: ",error:e.form_errors.prep_script}},[a("g-monaco-editor",{staticStyle:{height:"200px"},model:{value:e.form_data.prep_script,callback:function(t){e.$set(e.form_data,"prep_script",t)},expression:"form_data.prep_script"}})],1),a("el-form-item",{attrs:{label:"Post-task: ",error:e.form_errors.post_script}},[a("g-monaco-editor",{staticStyle:{height:"200px"},model:{value:e.form_data.post_script,callback:function(t){e.$set(e.form_data,"post_script",t)},expression:"form_data.post_script"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.submit_loading,"element-loading-spinner":"el-icon-loading"},on:{click:e.on_submit}},[e._v("Submit ")])],1)],1)],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.create_update_dialog_mixin],data:function(){return{active:"0",language:"python"}},mounted:function(){"create"==this.type&&(this.form_data={need_start:!0,only_main_program:!0})}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},7104:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.add_dialog("LAppCreateUpdate")}}},[e._v("New ")]),a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"kill_number",prop:"kill_number","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ops",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.add_dialog("LAppCreateUpdate",{type:"update",item:t.row})}}},[e._v(" Modify ")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/apps"}},mounted:function(){this.get_data()},methods:{}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"7630b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"2px",background:"#FFFFFF",padding:"10px 20px"}},[a("el-breadcrumb",{attrs:{separator:"/"}},e._l(this.$route.matched,(function(t){return a("el-breadcrumb-item",{key:t.path,attrs:{to:{path:t.path}}},[e._v(e._s(t.meta.name))])})),1),a("h1",{staticStyle:{"font-size":"20px"}},[e._v(e._s(this.$route.meta.name))]),e._t("default")],2)},i=[],o={name:"GPageHeader"},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"d9a593c2",null);t["default"]=l.exports},"7a81":function(e,t,a){"use strict";a("1991"),a("8310"),a("56f2"),a("f2a4");var n=a("d7f1");t["a"]={data:function(){return{url:"",data:[],loading:!1,count:0,base_params:{page_size:Object(n["g_calc_page_size"])(),page:1,search:""},params:{},extend_params:{}}},mounted:function(){if(!this.url)throw Error("使用list_mixin必须在data中提供url参数");this.params=Object.assign({},this.base_params,this.params,this.$route&&Object.keys(this.$route.params).length?this.$route.params:this.extend_params)},methods:{get_data:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this.params.page=1),this.before_get_data(),this.loading=!0,this.g_master_api.get(this.url,{params:this.params}).then((function(t){e.loading=!1,e.count=t.data.count,e.data=t.data.results;try{e.after_get_data(t.data)}catch(a){console.error(a),e.$message.error("执行 after_get_data 发生异常")}})).catch((function(t){e.loading=!1,e.after_get_data_error(t)}))},before_get_data:function(){},after_get_data:function(e){return e},after_get_data_error:function(e){console.error("error: ",e)},on_action:function(e,t,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i=Object.assign({confirm:!0,update_item:!0,delete_item:!1,form:null,success_callback:function(e){},error_callback:function(e){}},i),i.confirm?i.form?this.$prompt(i.form?i.form.label:"",a,{inputPlaceholder:i.form.placeholder?i.form.placeholder:"",inputValue:i.form.default?i.form.default:"",beforeClose:function(o,r,s){if("confirm"===o){r.confirmButtonLoading=!0;var l={};l[i.form.field]=r.inputValue,n._action(e,t,a,i,l,r,s)}else s()}}):this.$confirm("".concat(a,"?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(o,r,s){"confirm"===o?(r.confirmButtonLoading=!0,n._action(e,t,a,i,{},r,s)):s()}}):this._action(e,t,a,i)},_action:function(e,t,a,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,l="".concat(this.url,"/").concat(e.id,"/").concat(t);this.$c_master.post(l,o).then((function(t){i.$message.success("".concat(a,"成功")),r&&(r.confirmButtonLoading=!1),s&&s(),n.update_item&&i.data.splice(i.data.indexOf(e),1,t.data),n.delete_item&&i.data.splice(i.data.indexOf(e),1);try{n.success_callback(t,i)}catch(o){console.warn("success_callback执行失败 error: ".concat(o))}})).catch((function(e){r&&(r.confirmButtonLoading=!1);try{n.error_callback(e,i)}catch(e){console.warn("error_callback error: ".concat(e))}}))},on_delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a=this;this.$confirm("确认删除 ".concat(e[t]," ?"),"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(t,n,i){"confirm"===t?(n.confirmButtonLoading=!0,a._delete(e,n,i)):i()}})},_delete:function(e,t,a){var n=this,i="".concat(this.url,"/").concat(e.id);this.$c_master.delete(i).then((function(i){t.confirmButtonLoading=!1,n.$message.success("已删除"),n.data.splice(n.data.indexOf(e),1),a()})).catch((function(e){t.confirmButtonLoading=!1}))},on_change_sort:function(e){console.log(e),null==e.order?this.params.ordering="":"descending"==e.order?this.params.ordering="-"+e.prop:this.params.ordering=e.prop,this.get_data(!0)},on_change_filter:function(e){for(var t in e)this.params[t]=e[t];this.params.page=1,this.get_data(!0)},add_dialog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a["parent"]=this;var i=Vue.component(e),o=new i({propsData:a});return o.$parent=this,o.$store=this.$store,o.$mount(),o.$on("add_item",(function(e){t.data.unshift(e)})),o.$on("update_item",(function(e,a){t.data.splice(t.data.indexOf(e),1,a)})),o.$on("delete_item",(function(e){t.data.splice(t.data.indexOf(e),1)})),n?document.body.appendChild(o.$el):this.$el.appendChild(o.$el),o}}}},"7a84":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.add_dialog("TemplateCreateUpdate")}}},[e._v("创建 ")]),a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Pool key",prop:"pool_key","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Size",prop:"size",sortable:"","column-key":"size",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Unused",prop:"unused",sortable:"","column-key":"unused",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Ratio",sortable:"","column-key":"unused",formatter:function(e,t,a,n){return(e.unused/e.size).toFixed(2)+"%"},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"After days",prop:"after_days",sortable:"","column-key":"after_days",formatter:function(e,t,a,n){return 1e3==a?"一年后":a},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ops",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.add_dialog("LStorageGraph",{storage:t.row})}}},[e._v(" Graph ")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=(a("df54"),a("7fa4")),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/clusters"}},mounted:function(){this.get_data()},methods:{formatter_capacity:function(e,t,a,n){var i=a/Math.pow(1024,4);return i=i.toFixed(2),i="".concat(i," T"),i}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"7def":function(e,t,a){"use strict";a("9239")},"7df1d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"Edit post-task",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:function(t){return e.on_close(!0)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"script: ",error:e.form_errors.post_script}},[a("g-monaco-editor",{staticStyle:{height:"300px"},attrs:{language:e.language},model:{value:e.form_data.post_script,callback:function(t){e.$set(e.form_data,"post_script",t)},expression:"form_data.post_script"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.submit_loading,type:"primary"},on:{click:function(t){return e.on_submit()}}},[e._v("Submit ")])],1)],1)],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.create_update_dialog_mixin],data:function(){return console.log(this),{language:"other"}},methods:{}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"81a3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%"},on:{keyup:function(t){return(t.type.indexOf("key")||83===t.keyCode)&&t.ctrlKey?void e.emit("save",this.editor.getValue()):null}}})},i=[],o=a("5a10"),r=(a("431c"),{name:"GMonacoEditor",props:{value:{type:String,default:""},language:{type:String,default:"other"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:function(){return{}}}},data:function(){return{console:console,editor:null,aaaaaa:"lalalalalal"}},mounted:function(){this.init_monaco()},methods:{init_monaco:function(){var e=this,t=Object.assign({value:this.value,theme:this.theme,language:this.language,automaticLayout:!0},this.options);this.editor=o["a"].create(this.$el,t),this.editor.onDidChangeModelContent((function(t){var a=e.editor.getValue();e.value!==a&&e.$emit("input",a)}))}},watch:{options:{deep:!0,handler:function(e){this.editor&&this.editor.updateOptions(e)}},value:function(e){this.editor&&e!==this.editor.getValue()&&this.editor.setValue(e)},language:function(e){this.editor&&window.monaco.editor.setModelLanguage(this.editor.getModel(),e)},theme:function(e){this.editor&&window.monaco.editor.setTheme(e)}}}),s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"82f4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.add_dialog("TemplateCreateUpdate")}}},[e._v("创建 ")]),a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Pool key",prop:"pool_key","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Size",prop:"size",sortable:"","column-key":"size",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Unused",prop:"unused",sortable:"","column-key":"unused",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Ratio",sortable:"","column-key":"unused",formatter:function(e,t,a,n){return(e.unused/e.size).toFixed(2)+"%"},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"After days",prop:"after_days",sortable:"","column-key":"after_days",formatter:function(e,t,a,n){return 1e3==a?"一年后":a},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ops",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.add_dialog("LStorageGraph",{storage:t.row})}}},[e._v(" Graph ")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=(a("df54"),a("7fa4")),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/groups"}},mounted:function(){this.get_data()},methods:{formatter_capacity:function(e,t,a,n){var i=a/Math.pow(1024,4);return i=i.toFixed(2),i="".concat(i," T"),i}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"8a76":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",background:"black"}},[a("h1",[e._v("cmdb")])])}],o={mounted:function(){console.log("this.$route",this.$route)}},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},"8e4b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.display_count>0?a("el-submenu",{attrs:{index:e.item.name}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",{staticStyle:{display:"inline-block"}},[e._v(e._s(e.item.meta.name))])]),e._l(e.item.children,(function(t,n){return t.meta&&0==t.meta.display?e._e():a("el-menu-item",{key:n,attrs:{index:t.name}},[a("i",{staticClass:"el-icon-menu"}),a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.meta.name))])])}))],2):a("el-menu-item",{attrs:{index:e.item.name}},[a("i",{staticClass:"el-icon-menu"}),a("span",{staticStyle:{display:"inline-block"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.item.meta.name))])])},i=[],o=a("2639"),r={name:"MenuItem",props:["item"],computed:{display_count:function(){var e=0;if(!this.item.children||0==this.item.children.length)return e;var t,a=Object(o["a"])(this.item.children);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.meta&&0!=n.meta.display&&(e+=1)}}catch(i){a.e(i)}finally{a.f()}return e}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"8f77":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Center")]),e._l(e.data,(function(e){return a("l-workflow-app-item",{key:e.id,attrs:{item:e}})})),a("div",{staticStyle:{"z-index":"9999",position:"fixed"},style:{right:e.add_location.right+"px",top:e.add_location.top+"px"},attrs:{id:"dg"}},[a("el-button",{attrs:{icon:"el-icon-plus",circle:"",type:"primary"},on:{click:function(t){return e.add_dialog("LWorkflowTemplateUpdate")}}})],1)],2)},i=[],o=a("7a81"),r={mixins:[o["a"]],data:function(){return{url:"workflow/templates",add_location:{right:60,top:window.innerHeight-140}}},mounted:function(){console.log("mounted"),this.get_data()}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,"5589645a",null);t["default"]=c.exports},9017:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",[e._v("test update")])},i=[],o={name:"TestUpdate.vue",mounted:function(){console.log("test update")},beforeUpdate:function(){console.log("beforeUpdate")}},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"e7b05b38",null);t["default"]=l.exports},"90b9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"Log",visible:e.is_visible,"before-close":e.on_before_close,"append-to-body":"",size:"50%"},on:{"update:visible":function(t){e.is_visible=t}}},[a("el-tabs",e._l(e.data,(function(t,n){return a("el-tab-pane",{key:String(t.id),attrs:{label:"第"+(e.data.length-n)+"次",name:String(n)},on:{handleClick:function(t){return e.console.log(e.current_activate)}},model:{value:e.current_activate,callback:function(t){e.current_activate=t},expression:"current_activate"}},[a("table",{staticStyle:{width:"650px","table-layout":"fixed","word-wrap":"break-word","word-break":"break-all"},attrs:{border:"0"}},[a("tr",[a("td",{staticClass:"label"},[e._v("start_time:")]),a("td",[e._v(e._s(e._f("df_datetime")(t.create_time)))]),a("td",{staticClass:"label"},[e._v("end_time:")]),a("td",[e._v(e._s(e._f("df_datetime")(t.update_time)))])]),a("tr",[a("td",{staticClass:"label",attrs:{colspan:"1"}},[e._v("content: ")]),a("td",{attrs:{colspan:"3"}},[a("pre",{staticStyle:{"max-height":"300px",overflow:"auto"}},[e._v(e._s(t.content))])])])])])})),1),a("div",{staticStyle:{position:"absolute",right:"30px",bottom:"30px"}},[a("el-button",{staticStyle:{margin:"20px",float:"right"},attrs:{size:"medium",type:"primary",loading:e.retry_continue_loading},on:{click:e.on_retry_continue}},[e._v("Retry & continue ")]),a("el-button",{staticStyle:{margin:"20px",float:"right"},attrs:{size:"medium",type:"primary",loading:e.skip_continue_loading},on:{click:e.on_skip_continue}},[e._v("Skip & continue ")])],1)],1)},i=[],o={props:["node"],data:function(){return{current_activate:"",skip_loading:!1,is_visible:!0,url:"release/logs",params:{record:this.node.record,stage:this.node.stage,ordering:"-id"},data:[],close_confirm:!1,submit_loading:!1,retry_continue_loading:!1,skip_continue_loading:!1,interval_id:null}},mounted:function(){this.get_data(),this.interval_id=setInterval(this.get_data,5e3)},methods:{on_retry_continue:function(){var e=this,t={stage:this.node.stage},a="release/instance-release-records/".concat(this.node.record,"/retry-continue");this.retry_continue_loading=!0,this.$c_master.post(a,t).then((function(t){e.retry_continue_loading=!1,e.$message.success("Started")})).catch((function(t){e.retry_continue_loading=!1}))},on_skip_continue:function(){var e=this,t={stage:this.node.stage},a="release/instance-release-records/".concat(this.node.record,"/skip-continue");this.skip_continue_loading=!0,this.$c_master.post(a,t).then((function(t){e.skip_continue_loading=!1,e.$message.success("Skipped")})).catch((function(t){e.skip_continue_loading=!1}))},get_data:function(){var e=this;this.$c_master.get(this.url,{params:this.params}).then((function(t){e.data=t.data.results,e.data.length>0&&(e.current_activate="0")}))},on_before_close:function(e){var t=this;this.close_confirm?this.$confirm("确认关闭？").then((function(a){e(),setTimeout(t._remote_child,1e3)})).catch((function(e){})):(e(),setTimeout(this._remote_child,1e3))},_remote_child:function(){this.before_remote(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},before_remote:function(){this.interval_id&&clearInterval(this.interval_id)}}},r=o,s=(a("ea87"),a("8b2e")),l=Object(s["a"])(r,n,i,!1,null,"38d92b9d",null);t["default"]=l.exports},9239:function(e,t,a){},9823:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"app name",prop:"app__name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"cluster name",prop:"cluster__name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"create time",prop:"create_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=(a("df54"),a("7fa4")),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/groups",params:{app:this.$store.state.current_app_id}}},mounted:function(){this.get_data()},methods:{formatter_capacity:function(e,t,a,n){var i=a/Math.pow(1024,4);return i=i.toFixed(2),i="".concat(i," T"),i}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"9cc2":function(e,t,a){},"9ce1":function(e,t,a){"use strict";a("4278")},"9de2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("router-view",{attrs:{slot:"main"},slot:"main"})},i=[],o=a("8b2e"),r={},s=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},a0eb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.data["_index"]+" "+e.data["_id"]+" 修改",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"small"}},[e._l(e.fields,(function(t,n){return"S"!=n[0]?a("el-form-item",{key:n,attrs:{label:n+":",required:t.required,error:e._f("c_array_to_string")(e.errors[n])}},["list"==t.type?a("c-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.label?t.lable:n+" | type:"+t.type+"/"+t.child.type,multiple:"",filterable:"","allow-create":"","default-first-option":"",remote:""},model:{value:e.form_data[n],callback:function(t){e.$set(e.form_data,n,t)},expression:"form_data[k]"}}):a("el-input",{attrs:{placeholder:(t.label?t.label:n)+" | "+t.type},model:{value:e.form_data[n],callback:function(t){e.$set(e.form_data,n,t)},expression:"form_data[k]"}})],1):e._e()})),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.submit_loading},on:{click:function(t){return e.submit()}}},[e._v("提 交")])],1)],2)],1)])},i=[],o=(a("1991"),{data:function(){return console.log("this.props.data:",this.data),{is_visible:!0,loading:!1,submit_loading:!1,form_data:JSON.parse(JSON.stringify(this.data._source)),fields:[],errors:{}}},props:["data"],mounted:function(){var e=this;this.loading=!0,this.$g_master_api.options("cmdb/data/".concat(this.data._index)).then((function(t){e.loading=!1,e.fields=t.data.actions.POST})).catch((function(t){e.loading=!1,t.response&&t.response.data&&e.$message.error(e.response.data),console.log(t.message)}))},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;this.errors={},this.$g_master_api.put("cmdb/data/".concat(this.data._index,"/").concat(this.data._id),this.form_data).then((function(t){e.submit_loading=!1,e.$message.success("修改成功"),e.$emit("update_item",e.form_data),e.on_close()})).catch((function(t){e.submit_loading=!1,e.errors=t.response.data}))}}}),r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},a18c:function(e,t,a){"use strict";a.d(t,"b",(function(){return f}));a("8310"),a("4663"),a("ffae");var n=a("2639"),i=a("5601"),o=a("880c"),r=a("a53e"),s=a("4360"),l=a("0dbb");console.log("menus: ",l["a"]),i["default"].use(o["a"]);var c=[{path:"/login",name:"login",component:function(){return Promise.resolve().then(a.bind(null,"ede4"))}},{path:"/test",name:"test",component:function(){return Promise.resolve().then(a.bind(null,"65d4"))},meta:{login:!1}}],d=new o["a"]({mode:"history",base:"/",routes:c});d.beforeEach((function(e,t,a){if(console.log("to: ",e),e.meta&&!1===e.meta.login)a();else{if("login"==e.name||s["a"].state.user_info.id)return 0===e.matched.length?(r["Message"].warning("您访问的页面不存在或没有权限 自动后退到上一页"),t.name&&"login"!==t.name?void a({name:t.name}):void("/"!=t.path&&a("/"))):void a();a({name:"login",query:{next_path:e.fullPath}})}}));var u=function(e){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(-1==s["a"].state.user_permissions.indexOf(i))return!1}}catch(o){a.e(o)}finally{a.f()}return!0},p=function e(t){var a,i=[],o=Object(n["a"])(t);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(!r.meta.permissions||u(r.meta.permissions)){var s=Object.assign({},r);if(!r.children){i.push(s);continue}s.children=e(r.children),s.children.length>0&&i.push(s)}}}catch(l){o.e(l)}finally{o.f()}return i},f=function(){if(s["a"].state.user_menus.length)console.log("重复初始化路由");else{var e=[];console.log("store.state: ",s["a"].state),e=s["a"].state.user_info.is_staff||-1!=s["a"].state.user_permissions.indexOf("read_all")?l["a"]:p(l["a"]),0==e.length&&r["MessageBox"].alert("很抱歉 您没有权限 请联系管理员","提示",{confirmButtonText:"确定",callback:function(e){df_admin.sso.login()}}),s["a"].commit("set_user_menus",e);var t=[{path:"/",name:"root",meta:{name:"首页"},component:function(){return Promise.resolve().then(a.bind(null,"4d4e"))},redirect:e.length?e[0].path:"/test",children:e}];d.push(t),console.log("routers:",t),d.addRoutes(t),console.log("router: ",d),s["a"].state.filtered_menus=e}};t["a"]=d},a234:function(e,t,a){var n={"./af":"f372","./af.js":"f372","./ar":"b6f0","./ar-dz":"2c40","./ar-dz.js":"2c40","./ar-kw":"938c","./ar-kw.js":"938c","./ar-ly":"6c47","./ar-ly.js":"6c47","./ar-ma":"cb5b","./ar-ma.js":"cb5b","./ar-sa":"f62f","./ar-sa.js":"f62f","./ar-tn":"20e6","./ar-tn.js":"20e6","./ar.js":"b6f0","./az":"9a72","./az.js":"9a72","./be":"6f9f","./be.js":"6f9f","./bg":"eeed","./bg.js":"eeed","./bm":"5a98","./bm.js":"5a98","./bn":"226a","./bn-bd":"cfbf","./bn-bd.js":"cfbf","./bn.js":"226a","./bo":"aa62","./bo.js":"aa62","./br":"4c15","./br.js":"4c15","./bs":"a92b","./bs.js":"a92b","./ca":"00c6","./ca.js":"00c6","./cs":"95b9","./cs.js":"95b9","./cv":"a5fd","./cv.js":"a5fd","./cy":"fb84","./cy.js":"fb84","./da":"a0cb","./da.js":"a0cb","./de":"24b7","./de-at":"8cd7","./de-at.js":"8cd7","./de-ch":"fbbc","./de-ch.js":"fbbc","./de.js":"24b7","./dv":"5822","./dv.js":"5822","./el":"f03e","./el.js":"f03e","./en-au":"8509","./en-au.js":"8509","./en-ca":"0434","./en-ca.js":"0434","./en-gb":"2789","./en-gb.js":"2789","./en-ie":"ca53","./en-ie.js":"ca53","./en-il":"59d5","./en-il.js":"59d5","./en-in":"bb3f","./en-in.js":"bb3f","./en-nz":"ad96","./en-nz.js":"ad96","./en-sg":"8499","./en-sg.js":"8499","./eo":"581a","./eo.js":"581a","./es":"6e6e","./es-do":"8c4b","./es-do.js":"8c4b","./es-mx":"9463","./es-mx.js":"9463","./es-us":"4630","./es-us.js":"4630","./es.js":"6e6e","./et":"7090","./et.js":"7090","./eu":"e648","./eu.js":"e648","./fa":"7630","./fa.js":"7630","./fi":"730c","./fi.js":"730c","./fil":"d8b5","./fil.js":"d8b5","./fo":"7dad","./fo.js":"7dad","./fr":"35a6","./fr-ca":"f23d","./fr-ca.js":"f23d","./fr-ch":"aad1","./fr-ch.js":"aad1","./fr.js":"35a6","./fy":"6881","./fy.js":"6881","./ga":"d929","./ga.js":"d929","./gd":"68ff","./gd.js":"68ff","./gl":"274b","./gl.js":"274b","./gom-deva":"0f61","./gom-deva.js":"0f61","./gom-latn":"fa44","./gom-latn.js":"fa44","./gu":"2dfa","./gu.js":"2dfa","./he":"fa6e","./he.js":"fa6e","./hi":"2306","./hi.js":"2306","./hr":"99c1","./hr.js":"99c1","./hu":"c8b5","./hu.js":"c8b5","./hy-am":"4640","./hy-am.js":"4640","./id":"d58c","./id.js":"d58c","./is":"dba7","./is.js":"dba7","./it":"2e72","./it-ch":"8ec6","./it-ch.js":"8ec6","./it.js":"2e72","./ja":"2fd7","./ja.js":"2fd7","./jv":"8b8a","./jv.js":"8b8a","./ka":"1ec1","./ka.js":"1ec1","./kk":"d0f8","./kk.js":"d0f8","./km":"af2d","./km.js":"af2d","./kn":"00e1","./kn.js":"00e1","./ko":"bfe6","./ko.js":"bfe6","./ku":"d28d","./ku.js":"d28d","./ky":"9c78","./ky.js":"9c78","./lb":"4301","./lb.js":"4301","./lo":"3001","./lo.js":"3001","./lt":"1b10","./lt.js":"1b10","./lv":"8de6","./lv.js":"8de6","./me":"6a6d","./me.js":"6a6d","./mi":"7457","./mi.js":"7457","./mk":"7df1","./mk.js":"7df1","./ml":"8a4d","./ml.js":"8a4d","./mn":"ffd2","./mn.js":"ffd2","./mr":"bb40","./mr.js":"bb40","./ms":"d108","./ms-my":"6587","./ms-my.js":"6587","./ms.js":"d108","./mt":"dfa8","./mt.js":"dfa8","./my":"03ee","./my.js":"03ee","./nb":"3eb1","./nb.js":"3eb1","./ne":"527b","./ne.js":"527b","./nl":"2446","./nl-be":"6c8b","./nl-be.js":"6c8b","./nl.js":"2446","./nn":"9c82","./nn.js":"9c82","./oc-lnc":"217c","./oc-lnc.js":"217c","./pa-in":"9b42","./pa-in.js":"9b42","./pl":"9c21","./pl.js":"9c21","./pt":"3035","./pt-br":"96f4","./pt-br.js":"96f4","./pt.js":"3035","./ro":"04e9","./ro.js":"04e9","./ru":"ae98","./ru.js":"ae98","./sd":"228e","./sd.js":"228e","./se":"bfe0","./se.js":"bfe0","./si":"8651","./si.js":"8651","./sk":"f436","./sk.js":"f436","./sl":"1d05","./sl.js":"1d05","./sq":"45d4","./sq.js":"45d4","./sr":"1a21","./sr-cyrl":"f51c","./sr-cyrl.js":"f51c","./sr.js":"1a21","./ss":"9b6a","./ss.js":"9b6a","./sv":"c2c4","./sv.js":"c2c4","./sw":"3e8c","./sw.js":"3e8c","./ta":"1356","./ta.js":"1356","./te":"5c67","./te.js":"5c67","./tet":"6177","./tet.js":"6177","./tg":"5f8b","./tg.js":"5f8b","./th":"985e","./th.js":"985e","./tk":"9351","./tk.js":"9351","./tl-ph":"687d","./tl-ph.js":"687d","./tlh":"a6bc","./tlh.js":"a6bc","./tr":"81c3","./tr.js":"81c3","./tzl":"442e","./tzl.js":"442e","./tzm":"d865","./tzm-latn":"b199","./tzm-latn.js":"b199","./tzm.js":"d865","./ug-cn":"5582","./ug-cn.js":"5582","./uk":"33a9","./uk.js":"33a9","./ur":"5ee4","./ur.js":"5ee4","./uz":"9a44","./uz-latn":"8d2e","./uz-latn.js":"8d2e","./uz.js":"9a44","./vi":"29d7","./vi.js":"29d7","./x-pseudo":"cc1d","./x-pseudo.js":"cc1d","./yo":"f740","./yo.js":"f740","./zh-cn":"8273","./zh-cn.js":"8273","./zh-hk":"cfc7","./zh-hk.js":"cfc7","./zh-mo":"a93c","./zh-mo.js":"a93c","./zh-tw":"81d9","./zh-tw.js":"81d9"};function i(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id="a234"},a7fc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"我是标题",visible:e.is_visible,direction:e.direction,"before-close":e.handleClose},on:{"update:visible":function(t){e.is_visible=t}}},[a("span",[e._v("我来啦!")])])},i=[],o={name:"settings"},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"39a5596c",null);t["default"]=l.exports},ae8b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"Release history",width:"1000px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"instance_name",prop:"instance_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"app_name",prop:"app_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"cluster_name",prop:"cluster_name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"server_ip",prop:"server_ip","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"current stage",prop:"current_stage__display","column-key":"current_stage","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{width:"80",label:"status",prop:"status__display","column-key":"status","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)])},i=[],o=(a("4663"),a("7fa4")),r=a("4360"),s={mixins:[o["a"].mixins.dialog_mixin,o["a"].mixins.list_mixin],props:["instance"],data:function(){return{url:"release/instance-release-records",params:{app_name:r["a"].state.current_app_name,ordering:"-id",cluster_name:this.instance.pool__key,instance_name:this.instance.name}}},mounted:function(){this.get_data()},methods:{}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},afb8:function(e,t,a){e.exports=a.p+"img/ipfs_logo_09.d1731ed3.png"},ba82:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{ref:"aaaa",attrs:{title:"我是标题",visible:e.is_visible,"before-close":e.on_before_close,size:"1000px"},on:{"update:visible":function(t){e.is_visible=t}}},[a("g-flow-chart",{ref:"flow_chart",staticStyle:{height:"400px"},on:{on_click_node:e.on_click_node,external_objects_dropped:e.create_node,selection_moved:e.move_node,selection_deleted:e.delete_node}}),a("el-button",{on:{click:e.save_links}},[e._v("保存连接")])],1)},i=[],o=(a("1991"),a("4663"),a("2410"),a("9ecd"),a("bc39"),a("2639")),r=a("4c20"),s=a.n(r),l=a("3419"),c={props:["template"],mixins:[l["a"]],data:function(){return{type_label_value_map:null,node_id_node_map:{},type_value_label_map:{},item:{id:1}}},mounted:function(){this.get_type_map(),this.load_data()},methods:{on_click_node:function(){},create_node:function(e){var t=this,a=Number(e.loc.split(" ")[0]),n=Number(e.loc.split(" ")[0]),i={template:this.template.id,name:e.text,type:this.type_label_value_map[e.category],location_x:a,location_y:n};this.g_master_api.post("workflow/nodes",i=i).then((function(a){t.$refs.flow_chart.set_key_for_node_data(e,a.data.id),t.node_id_node_map[a.data.id]=a.data}))},get_type_map:function(){var e=this;this.g_master_api.get("workflow/nodes/get-choices?field_name=type").then((function(t){e.type_label_value_map=t.data["label_value_map"],e.type_value_label_map=t.data["value_label_map"]}))},delete_node:function(e){var t=this,a="workflow/nodes/".concat(e.key);this.g_master_api.delete(a).then((function(e){t.$message.success("删除成功")}))},move_node:function(e){var t=Number(e.loc.split(" ")[0]),a=Number(e.loc.split(" ")[0]),n="workflow/nodes/".concat(e.key),i={location_x:t,location_y:a};this.g_master_api.patch(n,i=i)},save_links:function(){var e=this,t=this.$refs.flow_chart.get_data();console.log("data: ",t),console.log("data.linkDataArray: ",t.linkDataArray);var a,n=[],i=Object(o["a"])(t.linkDataArray);try{for(i.s();!(a=i.n()).done;){var r=a.value,s={template:this.template.id,from_node:r.from,to_node:r.to};n.push(s)}}catch(c){i.e(c)}finally{i.f()}t={link_list:n};var l="workflow/templates/".concat(this.template.id,"/set-link");this.g_master_api.post(l,t).then((function(t){e.$message.success("保存成功")}))},load_data:function(){var e={template_id:this.template.id,page_size:100},t={template_id:this.template.id,page_size:100},a=this,n=this.g_master_api.get("workflow/nodes",{params:e}),i=this.g_master_api.get("workflow/links",{params:t});s.a.all([n,i]).then(s.a.spread((function(e,t){console.log("node_response: ",e);var n,i=[],r=Object(o["a"])(e.data.results);try{for(r.s();!(n=r.n()).done;){var s=n.value,l={category:a.type_value_label_map[s.type],key:s.id,loc:"".concat(s.location_x," ").concat(s.location_y),text:s.name};i.push(l)}}catch(m){r.e(m)}finally{r.f()}var c,d=[],u=Object(o["a"])(t.data.results);try{for(u.s();!(c=u.n()).done;){var p=c.value;l={from:p.from_node,to:p.to_node,from_port:p.from_port,to_port:p.to_port};d.push(l)}}catch(m){u.e(m)}finally{u.f()}var f={class:"go.GraphLinksModel",linkfrom_portIdProperty:"from_port",linkto_portIdProperty:"to_port",nodeDataArray:i,linkDataArray:d};console.log("data: ",f),a.$refs.flow_chart.set_data(f)})))}}},d=c,u=a("8b2e"),p=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=p.exports},bb51:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:a("cf05")}}),n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},i=[],o=a("fdab"),r={name:"Home",components:{HelloWorld:o["default"]}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},bdd5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"operation_proxy",prop:"operation_proxy","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"create time",prop:"create_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=(a("df54"),a("7fa4")),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"release/clusters"}},mounted:function(){this.get_data()},methods:{formatter_capacity:function(e,t,a,n){var i=a/Math.pow(1024,4);return i=i.toFixed(2),i="".concat(i," T"),i}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},bee3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"Pipeline",width:"800px",visible:e.is_visible,"before-close":e.on_before_close,size:"80%"},on:{"update:visible":function(t){e.is_visible=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("vue-pipeline",{attrs:{data:e.data,xstep:180},on:{select:e.on_select}})],1),a("el-button",{staticStyle:{position:"absolute",right:"30px",bottom:"30px"},attrs:{type:"primary",loading:e.on_retry_all_loading},on:{click:e.on_retry_all}},[e._v("Retry all ")])],1)},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.drawer],props:["release"],data:function(){return{view_first:!0,data:[{name:"Start",status:"start",next:[]}],loading:!1,close_confirm:!1,on_retry_all_loading:!1,interval_id:null}},mounted:function(){this.get_data(),this.interval_id=setInterval(this.get_data,5e3)},methods:{on_click:function(){this.data=[{name:"End",status:"end",next:[]}]},get_data:function(){var e=this;this.loading=!0;var t="release/releases/".concat(this.release.id,"/pipeline");this.$c_master.get(t).then((function(t){e.data=t.data.results,e.view_first=!e.view_first,e.loading=!1})).catch((function(t){e.loading=!1}))},on_select:function(e){console.log(this),this.$df_add_dialog("LReleaseNodeDetail",{node:e})},on_retry_all:function(){var e=this;this.on_retry_all_loading=!0;var t="release/releases/".concat(this.release.id,"/retry-all");this.$c_master.post(t).then((function(t){e.on_retry_all_loading=!1,e.$message.success("Start to retry the ".concat(t.data.count," failed instances"))})).catch((function(t){e.on_retry_all_loading=!1}))},on_before_close:function(e){var t=this;this.close_confirm?this.$confirm("确认关闭？").then((function(a){e(),setTimeout(t._remote_child,1e3)})).catch((function(e){})):(e(),setTimeout(this._remote_child,1e3))},_remote_child:function(){this.before_remote(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},before_remote:function(){this.interval_id&&clearInterval(this.interval_id)}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},bfd5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"表 "+e.table.name+" 详细信息",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("table",{staticStyle:{width:"100%",padding:"15px"}},[a("tr",[a("td",{staticStyle:{color:"#909399",width:"13%"}},[e._v("表名:")]),a("td",{staticStyle:{color:"#606266",width:"37%"}},[e._v(e._s(e.table.name))]),a("td",{staticStyle:{color:"#909399",width:"13%"}},[e._v("创建者")]),a("td",{staticStyle:{color:"#606266",width:"37%"}},[e._v(e._s(e.table.creator_username))])]),a("tr",[a("td",{staticStyle:{color:"#909399"}},[e._v("别名:")]),a("td",{staticStyle:{color:"#606266"}},[e._v(e._s(e.table.alias))]),a("td",{staticStyle:{color:"#909399"}},[e._v("创建时间:")]),a("td",{staticStyle:{color:"#606266"}},[e._v(e._s(e.table.creation_time))])]),a("tr",[a("td",{staticStyle:{color:"#909399"}},[e._v("自述:")]),a("td",{staticStyle:{color:"#606266"},attrs:{colspan:"3"}},[e._v(e._s(e.table.readme))])])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table.fields}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"自述:"}},[a("span",[e._v(e._s(t.row.readme))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"字段名"}}),a("el-table-column",{attrs:{prop:"alias",label:"别名"}}),a("el-table-column",{attrs:{label:"必须"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(String(t.row.required)))])]}}])}),a("el-table-column",{attrs:{label:"多值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(String(t.row.is_multi)))])]}}])}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.TYPE_MAP[t.row.type]))])]}}])})],1)],1)},i=[],o=(a("1991"),a("4663"),a("3f8d")),r={data:function(){return{is_visible:!0,form_data:{},fields:[],errors:{},TYPE_MAP:o["TYPE_MAP"]}},props:["table"],mounted:function(){var e=this;console.log("table.fields:",this.table.fields),this.$g_master_api.options("cmdb/data/".concat(this.table.name)).then((function(t){e.fields=t.actions.POST})).catch((function(e){}))},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;this.$g_master_api.put("cmdb/data/".concat(this.table_name,"/").concat(this.data._id),this.form_data).then((function(t){e.$message.success("添加成功")})).catch((function(t){if(console.log("exc.reponse:",t.response),t.response&&t.response.data)return t.response.data.detail?void e.$message.error(t.response.data.detail):void(e.errors=t.response.data);console.log(t.message)}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},c1a8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:e.clearable,multiple:e.multiple,placeholder:e.placeholder,loading:e.query_loading,size:e.size,disabled:e.disabled},model:{value:e.inner_value,callback:function(t){e.inner_value=t},expression:"inner_value"}},[e._t("default"),e._l(e.options,(function(t,n){return a("el-option",{key:void 0==e.value_key?n:t[e.value_field],attrs:{label:e.option_formatter?e.option_formatter(t,n):Array.isArray(e.display_field)?e.display_field.map((function(e){return t[e]})).join(" | "):t[e.display_field],disabled:!!e.disabled_field&&t[e.disabled_field],value:void 0==e.value_field?t:t[e.value_field]}})}))],2)},i=[],o=a("4c20"),r=a.n(o),s={name:"GRemoteSelect",props:{value:{},params:{type:Object,default:function(){return{}}},placeholder:{default:"输入关键字搜索"},multiple:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},url:{type:String,required:!0},results_field:{default:"results"},value_field:{type:String,required:!1},display_field:{required:!0},disabled_field:{type:String,required:!1},size:{type:String,default:"medium"},value_key:{type:String,default:"value"},disabled:Boolean,disable_query:Boolean,option_formatter:Function},data:function(){return{inner_value:this.value,options:[],filtered_options:[],query_loading:!1}},mounted:function(){if(void 0==this.value_field&&void 0==this.value_key)throw Error("prop 参数 value_field 和 key_field 不能同时为空 ");this.get_options()},methods:{get_options:function(){var e=this;this.disable_query||this.g_master_api.get(this.url,{params:this.params}).then((function(t){e.results_field?e.options=t.data[e.results_field]:e.options=t.data})).catch((function(t){r.a.isCancel(t)?console.log("remote select cancel error"):e.$message.error("获取下拉列表失败")}))},clean_options:function(){this.options=[]}},watch:{value:function(e,t){e!==t&&(this.inner_value=e)},inner_value:function(e){this.$emit("input",e),this.$emit("change",e)},url:function(e,t){this.get_options()},params:function(e,t){JSON.stringify(e)!=JSON.stringify(t)&&this.get_options()}}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},c3da:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"New release",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-right":"50px"},attrs:{"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"Version: ",error:e.form_errors.version}},[a("df-remote-select",{attrs:{url:"release/apps/version-list?app_name="+e.$store.state.current_app_name,display_field:"label",value_field:"key"},model:{value:e.form_data.version,callback:function(t){e.$set(e.form_data,"version",t)},expression:"form_data.version"}})],1),a("el-form-item",{attrs:{label:"Instance: ",error:e.form_errors.instance_list}},[a("g-env-tree",{model:{value:e.form_data.instance_list,callback:function(t){e.$set(e.form_data,"instance_list",t)},expression:"form_data.instance_list"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.submit_loading,type:"primary"},on:{click:function(t){return e.on_submit()}}},[e._v("Submit ")])],1)],1)],1)},i=[],o=a("7fa4"),r=a("dba9"),s=a("4360"),l={components:{GEnvTree:r["default"]},mixins:[o["a"].mixins.create_update_dialog_mixin],data:function(){return{form_data:{app_name:s["a"].state.current_app_name}}},methods:{}},c=l,d=a("8b2e"),u=Object(d["a"])(c,n,i,!1,null,null,null);t["default"]=u.exports},c660:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"我是标题",visible:e.is_visible,"before-close":e.on_before_close},on:{"update:visible":function(t){e.is_visible=t}}},[a("el-form",{staticStyle:{height:"330px","margin-right":"50px","padding-top":"30px"},attrs:{"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"模板名:",error:e.form_errors.name,required:""}},[a("el-input",{model:{value:e.form_data.name,callback:function(t){e.$set(e.form_data,"name",t)},expression:"form_data.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"拼音:",error:e.form_errors.pinyin,required:""}},[a("el-input",{model:{value:e.form_data.pinyin,callback:function(t){e.$set(e.form_data,"pinyin",t)},expression:"form_data.pinyin"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属组:",error:e.form_errors.group,required:""}},[a("g-remote-select",{staticStyle:{width:"100%"},attrs:{url:"workflow/groups",params:{page_size:100},value_field:"id",display_field:"name"},model:{value:e.form_data.group,callback:function(t){e.$set(e.form_data,"group",t)},expression:"form_data.group"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图标:",error:e.form_errors.icon}},[a("el-input",{attrs:{placeholder:""},model:{value:e.form_data.icon,callback:function(t){e.$set(e.form_data,"icon",t)},expression:"form_data.icon"}})],1)],1)],1),a("el-form-item",{attrs:{label:"维护人:",error:e.form_errors.maintainer}},[a("g-remote-query-select",{staticStyle:{width:"100%"},attrs:{url:"user/users",value_field:"id",display_field:"name"},model:{value:e.form_data.maintainer,callback:function(t){e.$set(e.form_data,"maintainer",t)},expression:"form_data.maintainer"}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"禁用:",error:e.form_errors.disabled,required:""}},[a("el-switch",{model:{value:e.form_data.disabled,callback:function(t){e.$set(e.form_data,"disabled",t)},expression:"form_data.disabled"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"隐藏:",error:e.form_errors.hidden,required:""}},[a("el-switch",{model:{value:e.form_data.hidden,callback:function(t){e.$set(e.form_data,"hidden",t)},expression:"form_data.hidden"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"回调工单:",error:e.form_errors.callback,required:""}},[a("el-switch",{model:{value:e.form_data.callback,callback:function(t){e.$set(e.form_data,"callback",t)},expression:"form_data.callback"}})],1)],1)],1),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.on_submit()}}},[e._v("提 交 ")])],1)],1)],1)},i=[],o=a("19cf"),r={mixins:[o["a"]],data:function(){return{url:"workflow/templates"}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},c86a:function(e,t,a){"use strict";a("1b21")},ca21:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},ce55:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"df-theme-color",staticStyle:{padding:"0px 20px",display:"flex","align-items":"center","justify-content":"space-between",height:"80px"}},[n("div",[n("img",{staticStyle:{height:"44px",display:"inline-block","vertical-align":"middle","box-sizing":"border-box"},attrs:{src:a("afb8")}}),n("span",{staticStyle:{"margin-left":"8px","letter-spacing":"2px","font-weight":"420",color:"#FFFFFF","font-size":"30px",height:"100%",display:"inline-block","box-sizing":"border-box","vertical-align":"middle"}},[e._v(" | "+e._s(e.site_name))]),n("g-remote-dropdown",{staticStyle:{"margin-left":"60px","background-color":"#0096ff","vertical-align":"middle"},attrs:{font_size:"20px",url:"release/apps",params:{page_size:50},auto_select_first:"",display_field:"name",value_field:"name"},on:{change:e.on_change_app}})],1),n("div",[n("ul",{staticClass:"c_ul"},[n("li",{staticClass:"c_li"},[n("transition",{attrs:{duration:1e3}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"el-icon-loading",staticStyle:{color:"#FFFFFF"}})])],1),e.api_url?n("li",{staticClass:"c_li",on:{click:function(t){return e.window.open(e.api_url)}}},[n("i",{staticClass:"fa fa-file-text",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),e._v("API文档 ")]):e._e(),e.help_url?n("li",{staticClass:"c_li",on:{click:function(t){return e.window.open(e.help_url)}}},[n("i",{staticClass:"fa fa-question-circle",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),e._v("帮助 ")]):e._e(),e.spit_slot_content?n("li",{staticClass:"c_li",on:{click:function(t){e.visible_dialog_spit_slot=!0}}},[n("i",{staticClass:"fa fa-comment",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),e._v("我要吐槽 ")]):e._e(),n("li",{staticClass:"c_li",on:{click:function(t){return e.$df_add_dialog("dfUpdateLog",{update_logs:e.update_logs})}}},[n("i",{staticClass:"fa fa-arrow-circle-o-up",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),e._v("更新日志 ")]),n("li",{staticClass:"c_li",on:{click:function(t){e.visible_dialog_about=!0}}},[n("i",{staticClass:"fa fa-info-circle",staticStyle:{"margin-right":"5px"},attrs:{"aria-hidden":"true"}}),e._v("关于 ")]),n("li",{staticClass:"c_li"},[n("el-dropdown",{},[n("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"16px",color:"#FFF"}},[n("i",{staticClass:"fa fa-user-circle-o",staticStyle:{"margin-right":"5px"}}),e._v(e._s(e.user_info.name?e.user_info.name:"未登录")+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{disabled:void 0==e.user_info.username},nativeOn:{click:function(t){e.visible_dialog_token=!0}}},[n("i",{staticClass:"fa fa-key",attrs:{"aria-hidden":"true"}}),e._v("Token ")]),e.user_info.username?n("el-dropdown-item",{nativeOn:{click:function(t){return e.on_logout(t)}}},[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),e._v("退出 ")]):n("el-dropdown-item",[n("i",{staticClass:"fa fa-sign-in",attrs:{"aria-hidden":"true"}}),e._v("登录 ")])],1)],1)],1)])]),n("el-dialog",{attrs:{title:"查看API Token",visible:e.visible_dialog_token,width:"600px"},on:{"update:visible":function(t){e.visible_dialog_token=t}}},[n("el-alert",{attrs:{title:"请妥善保存您的API Token",closable:!1,type:"warning"}}),n("div",{staticStyle:{padding:"0px 20px","padding-top":"20px"}},[n("span",[e._v(e._s(e.token))]),n("i",{staticClass:"fa fa-eye fa-lg",staticStyle:{float:"right","line-height":"24px"},attrs:{"aria-hidden":"true"},on:{click:e.get_token}})]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible_dialog_token=!1}}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"我要吐槽",visible:e.visible_dialog_spit_slot,width:"30%"},on:{"update:visible":function(t){e.visible_dialog_spit_slot=t}}},[n("span",[e._v(e._s(e.spit_slot_content))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible_dialog_spit_slot=!1}}},[e._v("知道了")])],1)]),n("el-dialog",{attrs:{title:"关于",visible:e.visible_dialog_about,width:"30%"},on:{"update:visible":function(t){e.visible_dialog_about=t}}},[n("span",[e._v(e._s(e.about_content))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible_dialog_about=!1}}},[e._v("确 定")])],1)])],1)},i=[],o={name:"dfHeader",props:{site_name:{type:String,required:!0},api_url:{type:String,required:!1},help_url:{type:String,required:!1},spit_slot_content:{type:String,required:!1},about_content:{type:String,default:""},user_info:{type:Object,default:function(){return{}}},update_logs:{type:Array,default:function(){}},get_token_url:{type:String,default:"user/users/get-my-token"},logout_url:{type:String,default:"user/users/logout"},loading:Boolean},data:function(){return{visible_dialog_token:!1,visible_dialog_spit_slot:!1,visible_dialog_about:!1,token:"***********************************************************",window:window}},mounted:function(){this.$store.state.current_app_id=this.$route.query.current_app_id},methods:{on_change_app:function(e,t,a){this.$root.$emit("change_current_app_id"),this.$store.commit("change_current_app",a)},get_token:function(){var e=this;this.$c_master.get(this.get_token_url).then((function(t){e.token=t.data.token})).catch((function(e){}))},on_logout:function(){var e=this;this.$confirm("确认退出","退出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info",center:!0}).then((function(){e.$c_master.post(e.logout_url).then((function(t){e.user_info={},e.$store.state.user_info={}}))}))}}},r=o,s=(a("6a66"),a("8b2e")),l=Object(s["a"])(r,n,i,!1,null,"05e538fe",null);t["default"]=l.exports},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d2f1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticStyle:{"white-space":"nowrap",margin:"0px",padding:"0px"}},[a("li",{staticStyle:{display:"inline-block",border:"1px solid #E4E7ED",padding:"9px"}},[a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-view"},on:{click:function(t){return e.on_show_detail(e.data)}}}),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-time"},on:{click:function(t){return e.on_show_history(e.data["_index"],e.data["_id"])}}}),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-edit"},on:{click:function(t){return e.on_change_data(e.data)}}}),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-delete"},on:{click:function(t){return e.on_delete()}}})],1),e._l(e.data["_source"],(function(t,n,i){return"S"!=n[0]?a("li",{key:i,staticStyle:{display:"inline-block",border:"1px solid #E4E7ED",padding:"0 12px","font-size":"14px",height:"40px","line-height":"40px",width:"100px"},style:{color:null==t?"#C0C4CC":"#606266"}},[e._v(" "+e._s(null==t?"null":t)+" ")]):e._e()}))],2)},i=[],o=(a("1991"),a("5601")),r={name:"data-item",props:["data"],methods:{on_show_history:function(e,t){var a=o["default"].component("HistoricalRecord");console.log("id:",t);var n=new a({propsData:{data_index:e,data_id:t}});n.$mount(),this.$el.appendChild(n.$el)},on_show_detail:function(e){console.log("on_show_detail.data:",e);var t=o["default"].component("DataDetail"),a=new t({propsData:{data:e,source:e["_source"]}});a.$mount(),this.$el.appendChild(a.$el)},on_change_data:function(e){var t=this,a=this.$g_add_dialog("ChangeData",{data:e});a.$on("update_item",(function(e){t.data._source=e}))},on_delete:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$g_master_api.delete("cmdb/data/".concat(e.data._index,"/").concat(e.data._id)).then((function(t){console.log("then"),console.log("response data:",t),e.$message.success("删除成功"),e.$emit("delete_data",e.data)})).catch((function(e){}))}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,"de2ceb32",null);t["default"]=c.exports},d7f1:function(e,t,a){"use strict";a.r(t),a.d(t,"g_add_dialog",(function(){return n})),a.d(t,"g_calc_page_size",(function(){return i})),a.d(t,"g_datetime",(function(){return o}));var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=window.Vue.component(e),n=new a({propsData:t});return n.$mount(),document.body.appendChild(n.$el),n},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:49,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:340,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,n=Math.floor((window.innerHeight-t)/e);return n>a?n:a},o=function(e){return e?e.substr(0,16):e}},dba9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{attrs:{placeholder:"Filter keyword"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.tree_data,"show-checkbox":"","node-key":"id","filter-node-method":e.filterNode,"default-expanded-keys":["_all"],"highlight-current":""},on:{check:e.on_check}})],1)},i=[],o=(a("0ffe"),a("8310"),{name:"GEnvTree",props:{value:{default:function(){return[]}}},data:function(){return{filterText:"",loading:!1,tree_data:[]}},mounted:function(){this.get_tree_data(),this.$refs.tree.setCheckedKeys(this.value)},methods:{get_tree_data:function(){var e=this,t="release/apps/".concat(this.$store.state.current_app_id,"/tree");this.loading=!0,this.$c_master.get(t).then((function(t){e.loading=!1,e.tree_data=t.data.results})).then((function(t){e.loading=!1}))},on_check:function(e,t){var a=t.checkedKeys.filter((function(e){return void 0!=e}));this.$emit("input",a),this.$emit("change",a)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},console_log:function(e){console.log(e)}},watch:{filterText:function(e){this.$refs.tree.filter(e)}}}),r=o,s=(a("c86a"),a("8b2e")),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},e474:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},i=[],o={name:"ConditionNode"},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,"8b80869c",null);t["default"]=l.exports},e613b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"向 "+e.table_name+" 添加记录",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-form",{staticStyle:{"margin-right":"50px"},attrs:{"label-width":"120px",size:"small"}},[e._l(e.fields,(function(t,n){return"S"!=n[0]?a("el-form-item",{key:n,attrs:{label:n+":",required:t.required,error:e._f("c_array_to_string")(e.errors[n])}},["list"==t.type?a("c-select",{staticStyle:{width:"100%"},attrs:{placeholder:(t.label?t.label:n)+" | type:"+t.type+"/"+t.child.type,multiple:"",filterable:"","allow-create":"","default-first-option":"",remote:""},model:{value:e.form_data[n],callback:function(t){e.$set(e.form_data,n,t)},expression:"form_data[k]"}}):a("el-input",{attrs:{placeholder:(t.label?t.label:n)+" | type:"+t.type},model:{value:e.form_data[n],callback:function(t){e.$set(e.form_data,n,t)},expression:"form_data[k]"}})],1):e._e()})),a("el-form-item",[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.submit_loading},on:{click:function(t){return e.submit()}}},[e._v("提 交")])],1)],2)],1)])},i=[],o={data:function(){return{is_visible:!0,loading:!1,submit_loading:!1,form_data:{},fields:[],errors:{}}},props:["table_name"],mounted:function(){var e=this;this.loading=!0,this.$g_master_api.options("cmdb/data/".concat(this.table_name)).then((function(t){e.loading=!1,e.fields=t.data.actions.POST})).catch((function(e){}))},methods:{on_close:function(){this.$el.parentNode.removeChild(this.$el),this.$destroy()},submit:function(){var e=this;this.submit_loading=!0,this.$g_master_api.post("cmdb/data/".concat(this.table_name),this.form_data).then((function(t){e.submit_loading=!1,e.$message.success("添加成功"),e.errors={},e.$emit("add_item",t.data._id),e.on_close()})).catch((function(t){e.submit_loading=!1,e.errors=t.response.data}))}}},r=o,s=a("8b2e"),l=Object(s["a"])(r,n,i,!1,null,null,null);t["default"]=l.exports},e753:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("span",{staticStyle:{color:"#606266","font-size":"14px","font-weight":"400","line-height":"36px","margin-right":"4px"}},[e._v("Pool: ")]),a("df-remote-select",{staticStyle:{width:"100px","margin-right":"40px"},attrs:{url:"release/pools?page_size=1000",display_field:"key",value_field:"key"},on:{change:e.on_change_pool},model:{value:e.params.pool__key,callback:function(t){e.$set(e.params,"pool__key",t)},expression:"params.pool__key"}}),a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.loading_list.start,type:"primary",size:"medium",disabled:0==e.selected_list.length},on:{click:function(t){return e.on_start_batch(e.selected_list)}}},[e._v("Batch start ")]),a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.loading_list.restart,type:"primary",size:"medium",disabled:0==e.selected_list.length},on:{click:function(t){return e.on_restart_batch(e.selected_list)}}},[e._v("Batch restart ")]),a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.loading_list.stop,type:"primary",size:"medium",disabled:0==e.selected_list.length},on:{click:function(t){return e.on_stop_batch(e.selected_list)}}},[e._v("Batch stop ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"Name",prop:"name","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Pool",prop:"pool__key",width:"100","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"IP",prop:"server__ip","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"group",prop:"group_id",width:"70","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Status",prop:"run_status",width:"80","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"header",fn:function(t){return[a("span",{directives:[{name:"loading",rawName:"v-loading",value:e.run_status_loading,expression:"run_status_loading"}],attrs:{"element-loading-spinner":"el-icon-loading"}},[e._v("Status")])]}},{key:"default",fn:function(t){return[void 0==t.row.run_status?a("i",{staticClass:"el-icon-loading"}):a("span",[e._v(e._s(t.row.run_status))])]}}])}),a("el-table-column",{attrs:{label:"Path",prop:"path","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Current version",prop:"current_version","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Ops",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",loading:t.row.start_loading},on:{click:function(a){return e.on_start_batch([t.row])}}},[e._v(" Start ")]),a("el-button",{attrs:{size:"mini",type:"text",loading:t.row.restart_loading},on:{click:function(a){return e.on_restart_batch([t.row])}}},[e._v(" Restart ")]),a("el-button",{attrs:{size:"mini",type:"text",loading:t.row.stop_loading},on:{click:function(a){return e.on_stop_batch([t.row])}}},[e._v(" Stop ")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.on_click_history(t.row)}}},[e._v(" History ")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=a("2639"),r=a("7fa4"),s={mixins:[r["a"].mixins.list_mixin],data:function(){return{url:"release/instances",params:{app__name:this.$store.state.current_app_name,pool__key:null},selected_list:[],loading_list:{start:!1,stop:!1,restart:!1},interval_id:null,run_status_loading:!1,last_pool_key_store_key:"instance__pool_key"}},mounted:function(){var e=localStorage.getItem(this.last_pool_key_store_key);e&&(this.params.pool__key=e,this.get_data()),this.interval_id=setInterval(this.after_get_data,5e3)},methods:{after_get_data:function(){this.data.length>0&&this.get_status_all()},get_status_all:function(){var e=this,t={instance_list:this.data,pool_key:this.params.pool__key};this.run_status_loading=!0,this.$c_master.post("release/instances/status-batch",t).then((function(t){for(var a=0;a<e.data.length;a++)e.run_status_loading=!1,e.$set(e.data[a],"run_status",t.data.results[a])})).catch((function(t){e.run_status_loading=!1,console.error(t),e.$message.error("获取运行状态失败")}))},handleSelectionChange:function(e){this.selected_list=e},stop_list:function(e){var t,a=this,n=Object(o["a"])(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.$set(i,"_loading",!0)}}catch(s){n.e(s)}finally{n.f()}this.stop_loading=!0;var r={instance_list:e,pool_key:this.params.pool__key};this.$c_master.post("release/stop-list",r).then((function(t){var n,i=Object(o["a"])(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;a.$set(r,"_loading",!1)}}catch(s){i.e(s)}finally{i.f()}a.stop_loading=!1,t.data.succeeded_count&&a.$message.success("".concat(t.data.succeeded_count," succeeded")),t.data.failed_count&&a.$message.warning("".concat(t.data.failed_count," failed"))})).catch((function(t){var n,i=Object(o["a"])(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;a.$set(r,"_loading",!1)}}catch(s){i.e(s)}finally{i.f()}a.stop_loading=!1}))},batch_action:function(e,t){var a=this;this.$confirm("".concat(e,"?"),"Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning",beforeClose:function(n,i,r){if("confirm"===n){i.confirmButtonLoading=!0;var s,l=Object(o["a"])(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;a.$set(c,"".concat(e,"_loading"),!0)}}catch(u){l.e(u)}finally{l.f()}a.loading_list[e]=!0;var d={instance_list:t,pool_key:a.params.pool__key};a.$c_master.post("release/instances/".concat(e,"-batch"),d).then((function(n){i.confirmButtonLoading=!1,r();var s,l=Object(o["a"])(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;a.$set(c,"".concat(e,"_loading"),!1)}}catch(u){l.e(u)}finally{l.f()}a.loading_list[e]=!1,n.data.succeeded_count&&a.$message.success("".concat(n.data.succeeded_count," succeeded")),n.data.failed_count&&a.$message.warning("".concat(n.data.failed_count," failed"))})).catch((function(n){i.confirmButtonLoading=!1;var r,s=Object(o["a"])(t);try{for(s.s();!(r=s.n()).done;){var l=r.value;a.$set(l,"".concat(e,"_loading"),!1)}}catch(u){s.e(u)}finally{s.f()}a.loading_list[e]=!1}))}else r()}})},on_start_batch:function(e){this.batch_action("start",e)},on_restart_batch:function(e){this.batch_action("restart",e)},on_stop_batch:function(e){this.batch_action("stop",e)},on_click_history:function(e){this.add_dialog("LInstanceHistory",{instance:e})},on_change_pool:function(e){localStorage.setItem(this.last_pool_key_store_key,e),this.get_data()}},beforeDestroy:function(){this.interval_id&&clearInterval(this.interval_id)}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},ea63:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},ea87:function(e,t,a){"use strict";a("9cc2")},eae8:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"graph",width:"800px",visible:e.is_visible},on:{"update:visible":function(t){e.is_visible=t},close:e.on_close}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("ve-line",{attrs:{data:e.chart_data,c:""}})],1)])},i=[],o=a("7fa4"),r={mixins:[o["a"].mixins.dialog_mixin],props:["storage"],data:function(){return{chart_data:{columns:["datetime","real","pred"],rows:[]},params:{history_days:10,predictions_days:30},loading:!1}},mounted:function(){this.get_data()},methods:{get_data:function(){var e=this;this.loading=!0;var t="storage/storages/".concat(this.storage.id,"/graph");this.$c_master.get(t,{params:this.params}).then((function(t){e.chart_data.rows=t.data.results,e.loading=!1,console.log(e.chart_data)})).catch((function(t){e.loading=!1}))}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},ebcc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("df-option-bar",[a("df-search",{attrs:{placeholder:"IP"},on:{change:function(t){return e.get_data(!0)}},model:{value:e.params.search,callback:function(t){e.$set(e.params,"search",t)},expression:"params.search"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,stripe:"",border:"",size:"medium"},on:{"sort-change":e.on_change_sort,"filter-change":e.on_change_filter}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Pool key",prop:"pool_key","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"IP",prop:"ip","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Size",prop:"size",sortable:"","column-key":"size",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Unused",prop:"unused",sortable:"","column-key":"unused",formatter:e.formatter_capacity,"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"Ratio",sortable:"","column-key":"unused",formatter:function(e,t,a,n){return(e.unused/e.size).toFixed(2)+"%"},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"After days",prop:"after_days",sortable:"","column-key":"after_days",formatter:function(e,t,a,n){return 1e3==a?"一年后":a},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"update time",prop:"update_time",sortable:"",formatter:function(t){return e.$df_datetime(t.update_time)},"show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"ops",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.add_dialog("LStorageGraph",{storage:t.row})}}},[e._v("Graph")])]}}])})],1),a("div",{staticStyle:{height:"80px"}},[a("el-pagination",{staticStyle:{float:"right","margin-right":"100px","margin-top":"20px"},attrs:{"current-page":e.params.page,"page-size":e.params.page_size,background:"",layout:"total, prev, pager, next",total:e.count},on:{"current-change":function(t){return e.get_data()},"update:currentPage":function(t){return e.$set(e.params,"page",t)},"update:current-page":function(t){return e.$set(e.params,"page",t)}}})],1)],1)},i=[],o=(a("df54"),a("7fa4")),r={mixins:[o["a"].mixins.list_mixin],data:function(){return{url:"storage/storages"}},mounted:function(){this.get_data()},methods:{formatter_capacity:function(e,t,a,n){var i=a/Math.pow(1024,4);return i=i.toFixed(2),i="".concat(i," T"),i}}},s=r,l=a("8b2e"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},ede4:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticStyle:{height:"100%"},attrs:{"element-loading-text":"登录中..."}})},i=[],o=(a("9ecd"),a("bc39"),a("a18c")),r=(a("3842"),a("f3e4")),s=(a("0dbb"),{mounted:function(){Object(r["b"])("sessionid");var e=this.$route.query.code;e?this.login_dingtalk():this.get_my_info()},methods:{get_my_info:function(){var e=this,t=this;this.g_master_api.get("user/users/get-my-info").then((function(e){t.init_info(e)})).catch((function(t){console.log("error:",t),e.$message.warning("登录失败 自动重试"),setTimeout(e.get_user_info,5e3)}))},login_dingtalk:function(){var e=this,t=this.$route.query.code,a={tmp_auth_code:t},n=this;this.$c_master.post("user/users/login-dingtalk",a).then((function(e){n.init_info(e)})).catch((function(t){console.log("error:",t),e.$message.warning("登录失败 自动重试"),setTimeout(e.get_user_info,5e3)}))},init_info:function(e){this.$store.commit("set_user_info",e.data),this.$store.commit("set_user_permissions",e.data.permissions);var t=this.$route.query.next_path;void 0==t&&(t="/"),console.log("next_path:",t),Object(o["b"])(),this.$router.push({path:t})},get_next_path:function(){console.log("get_next_path:",window.location.href);var e=window.location.href.split("next_path=");if(e.length>=2){var t=e[1].split("&token")[0];return decodeURIComponent(t)}return"/"}}}),l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,"474af1ce",null);t["default"]=d.exports},f121:function(e,t,a){"use strict";a("4c20");var n=new XMLHttpRequest;if(n.open("GET","config.json",!1),n.send(null),200!=n.status)throw alert("load config.json failed"),"load config.json failed";var i=JSON.parse(n.responseText),o={base_url:"http://localhost:8000/api/v1/",app_id:i.app_id},r={base_url:window.location.protocol+"//"+window.location.host+"/api/v1/"};console.log("process.env.NODE_ENV: ","production");var s=Object.assign({},o,r);console.log("export_config: ",s);t["a"]=s},f3e4:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o}));a("ffae"),a("9ecd"),a("ba40"),a("bc39");var n=a("2639"),i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new Date;n.setTime(n.getTime()+24*a*3600*1e3),document.cookie=e+"="+t+";expires="+n.toString()},o=function(e){var t,a=document.cookie.split("; "),i=Object(n["a"])(a);try{for(i.s();!(t=i.n()).done;){var o=t.value,r=o.split("=");if(e==r[0])return r[1]}}catch(s){i.e(s)}finally{i.f()}};t["a"]={set_cookie:i,get_cookie:o}},f4c2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",display:"flex",width:"256px"}},[a("el-menu",{attrs:{"default-active":e.$route.name,"unique-opened":"",collapse:e.is_collapse},on:{select:e.on_select}},e._l(e.menus,(function(t,n){return t.meta&&"false"==t.meta?e._e():a("l-frame-menu-item",{key:n,attrs:{item:t}})})),1)],1)},i=[],o=(a("dfea"),a("4663"),a("f2a4"),a("6e87"),a("2639")),r=a("0dbb"),s={name:"dfMenu",props:{collapse:{type:Boolean,default:!1}},data:function(){return{is_collapse:this.collapse,menu_map:{},menus:r["a"]}},mounted:function(){this.init_menu_map(this.menus),Object.keys(this.menu_map).includes(this.$route.name)&&this.menu_map[this.$route.name].meta&&!0===this.menu_map[this.$route.name].meta.collapse&&(this.is_collapse=!0)},methods:{on_select:function(e,t){var a=this.menu_map[e];a.meta&&!0===a.meta.collapse&&(this.is_collapse=!0),this.$router.push({name:e})},folding:function(){this.is_collapse=!1},unfolding:function(){this.is_collapse=!0},init_menu_map:function(e){var t,a=Object(o["a"])(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;this.menu_map[n.name]=n,n.children&&this.init_menu_map(n.children)}}catch(i){a.e(i)}finally{a.f()}}}},l=s,c=(a("06fb"),a("8b2e")),d=Object(c["a"])(l,n,i,!1,null,"1e92d4e3",null);t["default"]=d.exports},f820:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"about"},[a("h1",[e._v("This is an about page")])])}],o=a("8b2e"),r={},s=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=s.exports},fa78:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("g-page-header",[a("el-autocomplete",{ref:"search_input",staticStyle:{width:"100%"},attrs:{id:"search_input",autofocus:e.is_focus,"trigger-on-focus":!1,"suffix-icon":e.search_input_icon,"fetch-suggestions":e.history_filter,"select-when-unmatched":"",placeholder:"示例：(hostname:huawei* AND price:[20000 TO 40000]) 更多请参阅Lucene语法"},on:{focus:e.on_focus},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.on_search()}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{slot:"prepend",multiple:"",filterable:"","default-first-option":"",placeholder:"选择表 默认：all"},slot:"prepend",model:{value:e.indices,callback:function(t){e.indices=t},expression:"indices"}},e._l(e.tables,(function(t){return a("el-option",{key:t.id,staticStyle:{padding:"10px",display:"flex","align-items":"center","justify-content":"space-between"},attrs:{label:t.name,value:t.name}},[a("span",[e._v(e._s(t.name))]),a("div",[a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-circle-plus"},on:{click:function(a){return a.stopPropagation(),e.on_add_data(t)}}}),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-info"},on:{click:function(a){return a.stopPropagation(),e.on_show_info(t)}}})],1)])})),1),a("el-button",{attrs:{slot:"append",id:"submit",icon:"el-icon-search",loading:e.loading},on:{click:function(t){return e.on_search()}},slot:"append"})],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{border:"1px #DCDFE6 solid",margin:"10px 0px",width:"100%","overflow-x":"auto"}},e._l(e.data,(function(t){return a("l-cmdb-data-item",{key:t._id,attrs:{data:t},on:{delete_data:e.delete_data}})})),1),a("el-pagination",{staticStyle:{float:"right","margin-right":"100px"},attrs:{background:"",layout:"total, prev, pager, next","page-size":e.page_size,total:e.total_num,"current-page":e.current_page},on:{"update:currentPage":function(t){e.current_page=t},"update:current-page":function(t){e.current_page=t},"current-change":e.on_page_change}})],1)},i=[],o=(a("1991"),a("0ffe"),a("dfea"),a("8310"),a("d8b2"),a("56f2"),a("4663"),a("6e87"),a("4c20")),r=a.n(o),s={name:"DisplayData",data:function(){return{data:[],query:"",tables:[],loading:!1,current_query:"*",indices:[],current_indices:[],page:1,page_size:0,last_source:null,search_input_icon:"el-icon-edit",page_num:0,current_page:1,total_num:0,all_history:{},username:"",history:[],is_focus:!0}},mounted:function(){var e=this,t=this;document.onkeydown=function(e){window.event?e.keyCode:e.which;if(73==e.keyCode&&e.ctrlKey)t.$refs.search_input.focus();else if(78==e.keyCode&&e.ctrlKey){if(t.current_page*t.page_size>=t.total_num)return void t.$message.warning("已在末页");t.current_page+=1,t.on_page_change(t.current_page)}else if(80==e.keyCode&&e.ctrlKey){if(1==t.current_page)return void t.$message.warning("已在首页");t.current_page-=1,t.on_page_change(t.current_page)}};var a=Math.floor((window.innerHeight-170)/44);this.page_size=a>8?a:8,this.get_history(),this.g_master_api.get("cmdb/table",{params:{page_size:100,has_read_perms:!0}}).then((function(t){e.tables=t.data.results})).catch((function(e){})),this.search_data([],"*",1,this.page_size)},destroyed:function(){this.save_history()},methods:{on_focus:function(e){console.log("on_focus"),e.currentTarget.select()},history_filter:function(e,t){console.log("query_string:",e);var a=e?this.history.filter(this.filter_function(e)):this.history,n=[];a.map((function(e){n.push({value:e})})),console.log("results:",n),t(n)},filter_function:function(e){return function(t){return-1!=t.toLowerCase().indexOf(e.toLowerCase())}},get_history:function(){var e=JSON.parse(localStorage.getItem("history"));if(e){var t=this.$store.state.username;if(!t)return;this.username=t,this.all_history=e,this.history=e[t]?e[t]:[]}},save_history:function(){this.all_history[this.username]=this.history.splice(0,100),localStorage.setItem("history",JSON.stringify(this.all_history))},add_data:function(e){console.log("table:",e)},search_data:function(e,t,a,n){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.last_source;var l=r.a.CancelToken.source();this.last_source=l;var c=this;this.search_input_icon="el-icon-loading",this.loading=!0,this.g_master_api.post("cmdb/data-lucene",{indices:e,query:t,page:a,page_size:n}).then((function(e){i.loading=!1,c.data=e.data["hits"],i.total_num=e.data["total"],i.search_input_icon="el-icon-edit",i.page_num=Math.ceil(e.data.total/i.page_size),o&&(i.current_page=1),s&&s()})).catch((function(e){i.loading=!1,i.search_input_icon="el-icon-edit"}))},on_search:function(){var e=this,t=function(){e.current_query=e.query,e.current_indices=e.indices};this.current_query!=this.query||this.current_indices!=this.indices?(""==this.query&&(this.query="*"),this.is_focus=!1,this.history.includes(this.query)||this.history.unshift(this.query),this.page=1,this.search_data(this.indices,this.query,1,this.page_size,!0,t),document.getElementById("submit").focus()):this.$message.warning("重复搜索")},on_page_change:function(e){console.log("val:",e),this.current_page=e,this.search_data(this.current_indices,this.current_query,e,this.page_size)},delete_data:function(e){this.data.splice(this.data.indexOf(e),1),this.total_num-=1},on_add_data:function(e){var t=this,a=this.$g_add_dialog("AddData",{table_name:e.name});a.$on("add_item",(function(a){t.g_master_api.get("cmdb/data/".concat(e.name,"/").concat(a)).then((function(e){t.data.unshift(e.data)})).catch((function(e){}))}))},on_show_info:function(e){this.$g_add_dialog("LCmdbShowTable",{table:e})}}},l=s,c=a("8b2e"),d=Object(c["a"])(l,n,i,!1,null,null,null);t["default"]=d.exports},fdab:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),e._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-router",target:"_blank",rel:"noopener"}},[e._v("router")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-vuex",target:"_blank",rel:"noopener"}},[e._v("vuex")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],o={name:"HelloWorld",props:{msg:String}},r=o,s=(a("7def"),a("8b2e")),l=Object(s["a"])(r,n,i,!1,null,"1935ec24",null);t["default"]=l.exports}});
//# sourceMappingURL=app.3e8ee0ad.js.map